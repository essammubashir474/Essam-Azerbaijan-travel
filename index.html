<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="format-detection" content="telephone=no">
    <title>Azerbaijan Adventure: November 15-25, 2025</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        :root {
            --primary-blue: #0092BC;
            --primary-red: #E4002B;
            --primary-green: #00AF66;
            --text-dark: #2C3E50;
            --text-light: #5A6C7D;
            --bg-light: #F8F9FA;
            --bg-white: #FFFFFF;
            --border-color: #E1E8ED;
            --accent-gold: #FDB813;
            --shadow: 0 2px 8px rgba(0,0,0,0.1);
            --shadow-hover: 0 4px 16px rgba(0,0,0,0.15);
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: var(--text-dark);
            background-color: var(--bg-light);
        }

        /* Responsive images - mobile optimization */
        img {
            max-width: 100%;
            height: auto;
            display: block;
        }
        
        /* Header */
        .header {
            background: linear-gradient(135deg, var(--primary-blue) 0%, var(--primary-green) 100%);
            color: white;
            padding: 60px 20px;
            text-align: center;
            box-shadow: var(--shadow);
            position: relative;
            overflow: hidden;
        }
        
        .header::before {
            content: '';
            position: absolute;
            top: -50%;
            right: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(255,255,255,0.1) 0%, transparent 70%);
            animation: shimmer 3s ease-in-out infinite;
        }
        
        @keyframes shimmer {
            0%, 100% { transform: translate(0, 0); }
            50% { transform: translate(-10%, -10%); }
        }
        
        .header h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
            position: relative;
            z-index: 1;
        }
        
        .header p {
            font-size: 1.2rem;
            opacity: 0.95;
            position: relative;
            z-index: 1;
        }
        
        /* Navigation */
        .nav-container {
            background: var(--bg-white);
            position: sticky;
            top: 0;
            z-index: 1000;
            box-shadow: var(--shadow);
        }
        
        .nav {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            padding: 15px;
            gap: 10px;
            max-width: 1400px;
            margin: 0 auto;
            position: relative;
        }

        /* Visual hints for horizontal scrolling on mobile - both sides */
        .nav-container::before,
        .nav-container::after {
            content: '';
            position: absolute;
            top: 0;
            bottom: 0;
            width: 30px;
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.3s ease;
            z-index: 10;
        }

        /* Left fade indicator */
        .nav-container::before {
            left: 0;
            background: linear-gradient(to right, rgba(255,255,255,0.95), transparent);
        }

        /* Right fade indicator */
        .nav-container::after {
            right: 0;
            background: linear-gradient(to left, rgba(255,255,255,0.95), transparent);
        }

        @media (max-width: 480px) {
            .nav-container::before,
            .nav-container::after {
                opacity: 1;
            }
        }
        
        .nav-btn {
            padding: 8px 16px;
            background: white;
            color: var(--primary-blue);
            border: 2px solid var(--primary-blue);
            border-radius: 25px;
            text-decoration: none;
            transition: all 0.3s ease;
            font-weight: 500;
            white-space: nowrap;
        }
        
        .nav-btn:hover {
            background: var(--primary-blue);
            color: white;
            transform: translateY(-2px);
        }
        
        .nav-btn.active {
            background: var(--primary-blue);
            color: white;
        }
        
        /* Container */
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        
        /* Critical Info Card */
        .critical-info {
            background: linear-gradient(135deg, #FFF5E6 0%, #FFF 100%);
            border-left: 5px solid var(--accent-gold);
            padding: 20px;
            margin: 20px 0;
            border-radius: 8px;
            box-shadow: var(--shadow);
        }
        
        .critical-info h2 {
            color: var(--primary-red);
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 15px;
        }
        
        .critical-info h2::before {
            content: "⚠️";
            font-size: 1.5rem;
        }
        
        /* Day Cards */
        .day-card {
            background: var(--bg-white);
            border-radius: 12px;
            padding: 25px;
            margin: 20px 0;
            box-shadow: var(--shadow);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            scroll-margin-top: 80px;
        }
        
        .day-card:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-hover);
        }
        
        .day-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 3px solid var(--primary-green);
            padding-bottom: 15px;
            margin-bottom: 20px;
        }
        
        .day-title {
            color: var(--primary-blue);
            font-size: 1.8rem;
        }
        
        .day-date {
            color: var(--text-light);
            font-size: 0.95rem;
            font-weight: 500;
        }
        
        /* Schedule Items */
        .schedule-item {
            background: var(--bg-light);
            border-left: 3px solid var(--primary-blue);
            padding: 15px;
            margin: 15px 0;
            border-radius: 0 8px 8px 0;
        }
        
        .time-badge {
            display: inline-block;
            background: var(--primary-green);
            color: white;
            padding: 3px 10px;
            border-radius: 15px;
            font-size: 0.9rem;
            font-weight: 600;
            margin-bottom: 8px;
        }
        
        /* Info Boxes */
        .info-box {
            background: #E8F4F8;
            border: 1px solid #B8D9E8;
            padding: 15px;
            border-radius: 8px;
            margin: 10px 0;
        }
        
        .info-box.warning {
            background: #FFF5E6;
            border-color: #FFD4A3;
        }
        
        .info-box.success {
            background: #E8F8F3;
            border-color: #A8E8D8;
        }
        
        /* Lists */
        ul, ol {
            margin-left: 20px;
            margin-top: 10px;
            margin-bottom: 10px;
        }
        
        li {
            margin: 5px 0;
            color: var(--text-dark);
        }
        
        /* Budget Table */
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            box-shadow: var(--shadow);
            border-radius: 8px;
            overflow: hidden;
        }
        
        th {
            background: var(--primary-blue);
            color: white;
            padding: 12px;
            text-align: left;
            font-weight: 600;
        }
        
        td {
            padding: 12px;
            border-bottom: 1px solid var(--border-color);
            background: white;
        }
        
        tr:hover td {
            background: var(--bg-light);
        }
        
        /* Highlights */
        .highlight {
            background: linear-gradient(120deg, var(--accent-gold) 0%, var(--accent-gold) 100%);
            background-repeat: no-repeat;
            background-size: 100% 40%;
            background-position: 0 60%;
            padding: 2px 4px;
            font-weight: 600;
        }
        
        /* Restaurant Cards */
        .restaurant {
            background: #FFF;
            border: 2px solid var(--primary-green);
            border-radius: 8px;
            padding: 12px;
            margin: 10px 0;
        }
        
        .restaurant-name {
            font-weight: 600;
            color: var(--primary-green);
        }
        
        /* Footer */
        .footer {
            text-align: center;
            padding: 30px;
            background: linear-gradient(135deg, var(--primary-blue) 0%, var(--primary-green) 100%);
            color: white;
            margin-top: 50px;
        }
        
        /* Quick Stats */
        .stats-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }
        
        .stat-card {
            background: white;
            padding: 20px;
            border-radius: 12px;
            text-align: center;
            box-shadow: var(--shadow);
            transition: transform 0.3s ease;
        }
        
        .stat-card:hover {
            transform: translateY(-5px);
        }
        
        .stat-number {
            font-size: 2rem;
            font-weight: bold;
            color: var(--primary-blue);
        }
        
        .stat-label {
            color: var(--text-light);
            font-size: 0.9rem;
            margin-top: 5px;
        }
        
        /* Checklist */
        .checklist {
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: var(--shadow);
        }
        
        .checklist input[type="checkbox"] {
            margin-right: 10px;
            transform: scale(1.2);
        }
        
        .checklist label {
            display: block;
            padding: 8px 0;
            border-bottom: 1px solid var(--border-color);
            cursor: pointer;
        }
        
        .checklist label:hover {
            background: var(--bg-light);
            margin: 0 -20px;
            padding-left: 20px;
            padding-right: 20px;
        }
        
        /* Responsive */
        @media (max-width: 768px) {
            .header h1 {
                font-size: 1.8rem;
            }
            
            .header p {
                font-size: 1rem;
            }
            
            .day-header {
                flex-direction: column;
                align-items: flex-start;
                gap: 10px;
            }
            
            .nav {
                padding: 10px 5px;
                overflow-x: auto;
                -webkit-overflow-scrolling: touch;
                scrollbar-width: thin;
            }
            
            .nav-btn {
                font-size: 0.85rem;
                padding: 6px 12px;
                flex-shrink: 0;
            }
            
            table {
                font-size: 0.9rem;
            }
            
            th, td {
                padding: 8px;
            }
            
            .container {
                padding: 10px;
            }
            
            .day-card {
                padding: 15px;
                margin: 15px 0;
            }
            
            .stats-container {
                grid-template-columns: repeat(2, 1fr);
                gap: 10px;
            }
            
            .stat-card {
                padding: 15px;
            }
            
            .stat-number {
                font-size: 1.5rem;
            }
            
            /* Edit controls for tablets and small screens */
            .edit-controls {
                bottom: 0;
                top: auto;
                left: 0;
                right: 0;
                border-radius: 12px 12px 0 0;
                flex-direction: row;
                padding: 12px;
                background: rgba(255, 255, 255, 0.98);
                backdrop-filter: blur(10px);
            }
            
            .edit-btn {
                font-size: 0.9rem;
                padding: 10px 12px;
            }
            
            .edit-instructions {
                display: none !important;
            }
            
            .back-to-top {
                bottom: 80px;
                right: 20px;
                width: 45px;
                height: 45px;
            }
        }
        
        /* Mobile Phone Specific (max-width: 480px) */
        @media (max-width: 480px) {
            .header h1 {
                font-size: 1.4rem;
                line-height: 1.3;
            }
            
            .header p {
                font-size: 0.9rem;
            }
            
            .header {
                padding: 40px 15px;
            }
            
            .nav-container {
                position: sticky;
                top: 0;
                z-index: 1000;
            }
            
            .nav {
                display: flex;
                flex-wrap: nowrap;
                overflow-x: auto;
                -webkit-overflow-scrolling: touch;
                padding: 10px;
                justify-content: flex-start;
                scroll-behavior: smooth;
                scroll-snap-type: x proximity;
            }

            .nav-btn {
                scroll-snap-align: start;
            }
            
            .nav::-webkit-scrollbar {
                height: 4px;
            }
            
            .nav::-webkit-scrollbar-track {
                background: #f1f1f1;
            }
            
            .nav::-webkit-scrollbar-thumb {
                background: var(--primary-blue);
                border-radius: 2px;
            }
            
            .nav-btn {
                min-width: fit-content;
                white-space: nowrap;
                margin-right: 8px;
            }
            
            .day-title {
                font-size: 1.4rem;
            }
            
            .day-date {
                font-size: 0.85rem;
            }
            
            .schedule-item {
                padding: 12px;
                margin: 10px 0;
            }
            
            .time-badge {
                font-size: 0.8rem;
            }
            
            /* Make tables horizontally scrollable on mobile - improved */
            table {
                display: block;
                overflow-x: auto;
                -webkit-overflow-scrolling: touch;
                margin: 15px 0;
                border: 1px solid var(--border-color);
                border-radius: 8px;
            }

            /* Allow text wrapping in table cells on mobile */
            th, td {
                white-space: normal !important;
                min-width: 80px;
            }

            /* First column stays fixed for context */
            table th:first-child,
            table td:first-child {
                position: sticky;
                left: 0;
                background: white;
                z-index: 1;
                box-shadow: 2px 0 4px rgba(0,0,0,0.05);
            }
            
            th, td {
                padding: 6px;
                font-size: 0.85rem;
            }
            
            /* Stats in single column on very small screens */
            .stats-container {
                grid-template-columns: 1fr;
            }
            
            /* Checklist mobile optimization */
            .checklist label {
                font-size: 0.9rem;
                padding: 10px 0;
            }
            
            /* MOBILE SOLUTION: Hide individual controls, create unified menu */
            .edit-controls {
                display: none !important;
            }
            
            /* Hide desktop Live Widget on mobile */
            .live-widget {
                display: none !important;
            }
            
            /* Create new mobile-only control center */
            .mobile-control-center {
                display: block !important;
                position: fixed;
                bottom: 10px;
                right: 10px;
                z-index: 1005;
            }
            
            .mobile-menu-toggle {
                width: 56px;
                height: 56px;
                border-radius: 50%;
                background: linear-gradient(135deg, var(--primary-blue) 0%, var(--primary-green) 100%);
                color: white;
                border: none;
                box-shadow: 0 4px 12px rgba(0,0,0,0.3);
                display: flex;
                align-items: center;
                justify-content: center;
                font-size: 24px;
                cursor: pointer;
                transition: all 0.3s ease;
            }
            
            .mobile-menu-toggle.active {
                background: var(--primary-red);
                transform: rotate(45deg);
            }
            
            .mobile-control-panel {
                position: fixed;
                bottom: 0;
                left: 0;
                right: 0;
                background: white;
                border-radius: 20px 20px 0 0;
                padding: 20px;
                box-shadow: 0 -4px 20px rgba(0,0,0,0.2);
                transform: translateY(100%);
                transition: transform 0.3s ease;
                z-index: 1004;
                max-height: 60vh;
                overflow-y: auto;
            }

            /* Smaller panel on very small screens */
            @media (max-height: 600px) {
                .mobile-control-panel {
                    max-height: 50vh;
                }
            }
            
            .mobile-control-panel.open {
                transform: translateY(0);
            }
            
            .mobile-live-section {
                background: var(--bg-light);
                border-radius: 12px;
                padding: 15px;
                margin-bottom: 15px;
            }
            
            .mobile-actions {
                display: grid;
                grid-template-columns: repeat(2, 1fr);
                gap: 10px;
                margin-top: 15px;
            }
            
            .mobile-action-btn {
                padding: 12px;
                border: none;
                border-radius: 8px;
                font-weight: 600;
                font-size: 0.9rem;
                cursor: pointer;
                transition: all 0.2s ease;
            }
            
            .mobile-action-btn.edit {
                background: var(--primary-blue);
                color: white;
            }
            
            .mobile-action-btn.print {
                background: var(--primary-green);
                color: white;
            }
            
            .mobile-action-btn.save {
                background: var(--accent-gold);
                color: var(--text-dark);
            }
            
            .mobile-action-btn.today {
                background: var(--primary-blue);
                color: white;
            }
            
            /* Hide other elements when menu is open */
            body.mobile-menu-open {
                overflow: hidden;
            }
            
            .mobile-overlay {
                display: none;
                position: fixed;
                top: 0;
                left: 0;
                right: 0;
                bottom: 0;
                background: rgba(0,0,0,0.5);
                z-index: 1003;
            }
            
            .mobile-overlay.active {
                display: block;
            }
            
            /* Edit mode indicator for mobile */
            .mobile-edit-indicator {
                position: fixed;
                top: 65px;
                left: 50%;
                transform: translateX(-50%);
                background: var(--accent-gold);
                color: var(--text-dark);
                padding: 4px 12px;
                border-radius: 12px;
                font-size: 0.75rem;
                font-weight: 600;
                z-index: 999;
                display: none;
            }
            
            .edit-mode .mobile-edit-indicator {
                display: block;
            }
            
            /* Hide edit instructions on mobile */
            .edit-instructions {
                display: none !important;
            }
            
            /* Info boxes mobile */
            .info-box {
                padding: 12px;
                font-size: 0.9rem;
            }
            
            .critical-info {
                padding: 15px;
            }
            
            .critical-info h2 {
                font-size: 1.2rem;
            }
            
            /* Restaurant cards mobile */
            .restaurant {
                padding: 10px;
                font-size: 0.9rem;
            }
            
            /* Footer mobile */
            .footer {
                padding: 20px;
                padding-bottom: 80px; /* Space for floating button */
            }
            
            .footer h2 {
                font-size: 1.3rem;
            }
            
            .footer p {
                font-size: 0.9rem;
            }
            
            /* Add activity button mobile */
            .add-activity-btn {
                width: 100%;
                padding: 12px;
                font-size: 0.9rem;
                margin-bottom: 10px;
            }
            
            /* Back to top button hidden on mobile (integrated in menu) */
            .back-to-top {
                display: none !important;
            }
            
            /* Container padding bottom for floating button */
            .container {
                padding-bottom: 80px;
            }
            
            /* Floating today button hidden (integrated in menu) */
            .floating-today-btn {
                display: none !important;
            }
            
            /* Notification badge repositioned */
            .notification-badge {
                top: 65px;
                right: 10px;
                left: auto;
                max-width: 200px;
            }
            
            /* Smart reminder for mobile */
            .smart-reminder {
                width: 90%;
                max-width: 350px;
                padding: 20px;
            }
        }
        
        /* Mobile control center - properly hidden on desktop */
        @media (min-width: 481px) {
            .mobile-control-center {
                display: none !important;
            }
            
            .mobile-control-panel {
                display: none !important;
            }
            
            .mobile-overlay {
                display: none !important;
            }
            
            .mobile-edit-indicator {
                display: none !important;
            }
        }
        
        /* FORCE mobile control center to show on mobile phones */
        @media (max-width: 480px) {
            .mobile-control-center {
                display: block !important;
                position: fixed !important;
                bottom: 20px !important;
                right: 20px !important;
                z-index: 9999 !important;
                visibility: visible !important;
                opacity: 1 !important;
            }
            
            .mobile-menu-toggle {
                width: 56px !important;
                height: 56px !important;
                border-radius: 50% !important;
                background: linear-gradient(135deg, #0092BC 0%, #00AF66 100%) !important;
                color: white !important;
                border: none !important;
                box-shadow: 0 4px 12px rgba(0,0,0,0.3) !important;
                display: flex !important;
                align-items: center !important;
                justify-content: center !important;
                font-size: 24px !important;
                cursor: pointer !important;
            }
            
            /* Hide desktop elements on mobile */
            .live-widget {
                display: none !important;
            }
            
            .edit-controls {
                display: none !important;
            }
            
            .floating-today-btn {
                display: none !important;
            }
            
            .back-to-top {
                display: none !important;
            }
        }
        
        /* iOS Specific Fixes */
        @supports (-webkit-touch-callout: none) {
            /* iOS Safari specific styles */
            .nav {
                padding-bottom: 15px;
            }
            
            input[type="checkbox"] {
                -webkit-appearance: none;
                width: 20px;
                height: 20px;
                border: 2px solid var(--primary-blue);
                border-radius: 4px;
                position: relative;
                margin-right: 10px;
            }
            
            input[type="checkbox"]:checked {
                background: var(--primary-blue);
            }
            
            input[type="checkbox"]:checked::after {
                content: '✓';
                position: absolute;
                color: white;
                font-size: 14px;
                top: 0;
                left: 3px;
            }
        }
        
        /* Touch-friendly adjustments */
        @media (hover: none) and (pointer: coarse) {
            /* Touch devices */
            .nav-btn {
                padding: 10px 16px;
                min-height: 44px;
            }
            
            .edit-btn {
                min-height: 44px;
            }
            
            .add-activity-btn {
                min-height: 44px;
            }
            
            .back-to-top {
                width: 50px;
                height: 50px;
            }
            
            /* Larger touch targets for checkboxes */
            .checklist label {
                padding: 12px 0;
                min-height: 44px;
                display: flex;
                align-items: center;
            }
            
            /* Contenteditable elements get bigger touch targets */
            [contenteditable="true"] {
                min-height: 32px;
                padding: 8px 4px;
            }
        }
        
        /* Landscape phone optimization */
        @media (max-width: 812px) and (orientation: landscape) {
            .header {
                padding: 20px 15px;
            }

            .header h1 {
                font-size: 1.4rem;
            }

            .header p {
                font-size: 0.95rem;
            }
            
            .edit-controls {
                top: 10px;
                bottom: auto;
                right: 10px;
                left: auto;
                flex-direction: column;
            }
            
            .nav-container {
                padding: 5px 0;
            }
        }
        
        /* Dark mode support for mobile */
        @media (prefers-color-scheme: dark) {
            /* Optional: Add dark mode styles here if wanted */
        }
        
        /* Prevent zoom on input focus (iOS) */
        input, textarea, select {
            font-size: 16px !important;
        }
        
        /* Safe area insets for iPhone X and newer */
        @supports (padding: max(0px)) {
            .container {
                padding-left: max(20px, env(safe-area-inset-left));
                padding-right: max(20px, env(safe-area-inset-right));
            }
            
            .edit-controls {
                padding-bottom: max(15px, env(safe-area-inset-bottom));
            }
            
            .footer {
                padding-bottom: max(30px, env(safe-area-inset-bottom));
            }
        }
        
        /* Print Styles */
        @media print {
            .nav-container {
                display: none;
            }
            
            .day-card {
                page-break-inside: avoid;
                box-shadow: none;
                border: 1px solid #ddd;
            }
            
            body {
                background: white;
            }
        }
        
        /* Smooth Scroll */
        html {
            scroll-behavior: smooth;
        }

        /* Booking Info Button */
        .info-btn {
            display: inline-flex;
            align-items: center;
            gap: 5px;
            padding: 6px 12px;
            background: linear-gradient(135deg, #0092BC, #00AF66);
            color: white;
            border: none;
            border-radius: 20px;
            font-size: 0.85rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-left: 10px;
            box-shadow: 0 2px 6px rgba(0, 146, 188, 0.3);
        }

        .info-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0, 146, 188, 0.5);
        }

        .info-btn:active {
            transform: translateY(0);
        }

        /* Side Panel for Desktop */
        .booking-side-panel {
            position: fixed;
            top: 0;
            right: -450px;
            width: 450px;
            height: 100vh;
            background: white;
            box-shadow: -4px 0 20px rgba(0,0,0,0.2);
            z-index: 2000;
            transition: right 0.4s cubic-bezier(0.4, 0.0, 0.2, 1);
            overflow-y: auto;
            display: flex;
            flex-direction: column;
        }

        .booking-side-panel.open {
            right: 0;
        }

        /* Modal Overlay for Mobile */
        .booking-modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.6);
            z-index: 1999;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
            backdrop-filter: blur(2px);
        }

        .booking-modal-overlay.show {
            opacity: 1;
            visibility: visible;
        }

        /* Modal for Mobile */
        .booking-modal {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) scale(0.9);
            width: 90%;
            max-width: 500px;
            max-height: 85vh;
            background: white;
            border-radius: 16px;
            z-index: 2000;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
            overflow: hidden;
            display: flex;
            flex-direction: column;
            box-shadow: 0 10px 40px rgba(0,0,0,0.3);
        }

        .booking-modal.show {
            opacity: 1;
            visibility: visible;
            transform: translate(-50%, -50%) scale(1);
        }

        /* Panel Header */
        .booking-panel-header {
            background: linear-gradient(135deg, #0092BC 0%, #00AF66 100%);
            color: white;
            padding: 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-shrink: 0;
        }

        .booking-panel-header h3 {
            margin: 0;
            font-size: 1.3rem;
            font-weight: 600;
        }

        .booking-panel-close {
            background: rgba(255,255,255,0.2);
            border: none;
            color: white;
            font-size: 24px;
            width: 36px;
            height: 36px;
            border-radius: 50%;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s ease;
            line-height: 1;
        }

        .booking-panel-close:hover {
            background: rgba(255,255,255,0.3);
            transform: rotate(90deg);
        }

        /* Panel Content */
        .booking-panel-content {
            padding: 25px;
            overflow-y: auto;
            flex: 1;
        }

        .booking-detail-row {
            margin-bottom: 20px;
            padding-bottom: 20px;
            border-bottom: 1px solid #E1E8ED;
        }

        .booking-detail-row:last-child {
            border-bottom: none;
            margin-bottom: 0;
            padding-bottom: 0;
        }

        .booking-detail-label {
            font-size: 0.85rem;
            color: var(--text-light);
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            margin-bottom: 6px;
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .booking-detail-value {
            font-size: 1.05rem;
            color: var(--text-dark);
            font-weight: 500;
            display: flex;
            align-items: center;
            gap: 10px;
            flex-wrap: wrap;
        }

        /* Copy Button */
        .copy-btn {
            background: #F8F9FA;
            border: 1px solid #E1E8ED;
            padding: 4px 10px;
            border-radius: 6px;
            font-size: 0.75rem;
            color: var(--primary-blue);
            cursor: pointer;
            transition: all 0.2s ease;
            font-weight: 600;
        }

        .copy-btn:hover {
            background: var(--primary-blue);
            color: white;
            border-color: var(--primary-blue);
        }

        .copy-btn:active {
            transform: scale(0.95);
        }

        .copy-btn.copied {
            background: var(--primary-green);
            color: white;
            border-color: var(--primary-green);
        }

        /* Action Buttons */
        .booking-actions {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
            gap: 10px;
            margin-top: 25px;
        }

        .action-btn {
            padding: 12px;
            border: none;
            border-radius: 8px;
            font-size: 0.9rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 6px;
            text-decoration: none;
        }

        .action-btn-call {
            background: #00AF66;
            color: white;
        }

        .action-btn-call:hover {
            background: #009955;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0, 175, 102, 0.3);
        }

        .action-btn-email {
            background: #0092BC;
            color: white;
        }

        .action-btn-email:hover {
            background: #007A9E;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0, 146, 188, 0.3);
        }

        .action-btn-map {
            background: #E4002B;
            color: white;
        }

        .action-btn-map:hover {
            background: #C40024;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(228, 0, 43, 0.3);
        }

        /* Status Badge */
        .status-badge {
            display: inline-block;
            padding: 4px 12px;
            border-radius: 12px;
            font-size: 0.75rem;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .status-confirmed {
            background: #E8F8F3;
            color: #00AF66;
        }

        .status-prepaid {
            background: #E6F4F8;
            color: #0092BC;
        }

        /* Important Notes */
        .booking-note {
            background: #FFF5E6;
            border-left: 4px solid #FDB813;
            padding: 12px 15px;
            border-radius: 6px;
            margin-top: 15px;
            font-size: 0.9rem;
            color: var(--text-dark);
            line-height: 1.5;
        }

        /* Responsive: Use Modal on Mobile, Side Panel on Desktop */
        @media (min-width: 769px) {
            .booking-modal {
                display: none !important;
            }
        }

        @media (max-width: 768px) {
            .booking-side-panel {
                display: none !important;
            }

            .info-btn {
                font-size: 0.8rem;
                padding: 5px 10px;
            }
        }
        
        /* Back to Top Button */
        .back-to-top {
            position: fixed;
            bottom: 30px;
            right: 30px;
            background: var(--primary-blue);
            color: white;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            text-decoration: none;
            box-shadow: var(--shadow-hover);
            transition: all 0.3s ease;
            z-index: 999;
        }
        
        .back-to-top:hover {
            background: var(--primary-green);
            transform: translateY(-5px);
        }
        
        /* Editable Elements Styling */
        [contenteditable="true"] {
            outline: none;
            transition: all 0.3s ease;
            position: relative;
        }
        
        [contenteditable="true"]:hover {
            background: rgba(0, 146, 188, 0.05);
            border-radius: 4px;
            cursor: text;
        }
        
        [contenteditable="true"]:focus {
            background: rgba(0, 175, 102, 0.08);
            border-radius: 4px;
            box-shadow: 0 0 0 2px rgba(0, 175, 102, 0.3);
            padding: 4px;
        }
        
        /* Edit Mode Toggle */
        .edit-controls {
            position: fixed;
            top: 20px;
            left: 20px;  /* Changed from right to left */
            z-index: 1001;
            background: white;
            padding: 15px;
            border-radius: 12px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.15);
            display: flex;
            flex-direction: column;
            gap: 10px;
        }
        
        .edit-btn {
            padding: 10px 20px;
            background: var(--primary-blue);
            color: white;
            border: none;
            border-radius: 25px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
        }
        
        .edit-btn:hover {
            background: var(--primary-green);
            transform: translateY(-2px);
        }
        
        .edit-mode-indicator {
            background: var(--accent-gold);
            color: var(--text-dark);
            padding: 5px 15px;
            border-radius: 15px;
            font-size: 0.9rem;
            font-weight: 600;
            display: none;
        }
        
        .edit-mode .edit-mode-indicator {
            display: block;
        }
        
        .edit-mode [contenteditable="true"] {
            border: 1px dashed rgba(0, 146, 188, 0.3);
            padding: 2px;
        }
        
        /* Add Activity Button */
        .add-activity-btn {
            display: none;
            margin: 15px 0;
            padding: 10px 20px;
            background: var(--primary-green);
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
        }
        
        .edit-mode .add-activity-btn {
            display: inline-block;
        }
        
        .add-activity-btn:hover {
            background: var(--primary-blue);
            transform: translateY(-2px);
        }
        
        /* Instructions Panel */
        .edit-instructions {
            display: none;
            position: fixed;
            bottom: 20px;
            left: 20px;
            background: white;
            padding: 15px;
            border-radius: 12px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.15);
            max-width: 300px;
            z-index: 1000;
        }
        
        .edit-mode .edit-instructions {
            display: block;
        }
        
        .edit-instructions h4 {
            margin: 0 0 10px 0;
            color: var(--primary-blue);
        }
        
        .edit-instructions ul {
            margin: 0;
            padding-left: 20px;
            font-size: 0.9rem;
        }
        
        /* Live Features Styles */
        .live-widget {
            position: fixed;
            top: 120px;  /* Moved down from 100px to avoid nav overlap */
            right: 20px;
            background: white;
            border-radius: 12px;
            padding: 15px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.15);
            z-index: 999;
            min-width: 250px;
            max-width: 300px;
            transition: all 0.3s ease;
        }
        
        .live-widget.collapsed {
            min-width: auto;
            max-width: 60px;
            padding: 10px;
            cursor: pointer;
        }
        
        .live-widget.collapsed .live-content {
            display: none;
        }
        
        .live-widget-toggle {
            position: absolute;
            top: 8px;
            left: 8px;
            background: var(--primary-blue);
            color: white;
            border: none;
            width: 24px;
            height: 24px;
            border-radius: 50%;
            cursor: pointer;
            font-size: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
        }
        
        .live-widget-toggle:hover {
            background: var(--primary-green);
            transform: rotate(180deg);
        }
        
        .live-widget-close {
            position: absolute;
            top: 8px;
            right: 8px;
            background: none;
            border: none;
            font-size: 20px;
            cursor: pointer;
            color: #999;
            width: 24px;
            height: 24px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .live-widget-close:hover {
            color: var(--primary-red);
        }
        
        .live-content {
            margin-top: 20px;
        }
        
        .live-time {
            font-size: 1.8rem;
            font-weight: bold;
            color: var(--primary-blue);
            text-align: center;
            margin-bottom: 5px;
        }
        
        .live-widget.collapsed .live-time {
            font-size: 1rem;
            margin-top: 15px;
        }
        
        .live-date {
            text-align: center;
            color: var(--text-light);
            font-size: 0.9rem;
            margin-bottom: 10px;
        }
        
        .current-activity {
            background: linear-gradient(135deg, #E8F8F3 0%, #D4EFDF 100%);
            border-left: 4px solid var(--primary-green);
            padding: 12px;
            border-radius: 8px;
            margin: 10px 0;
        }
        
        .next-activity {
            background: #FFF5E6;
            border-left: 4px solid var(--accent-gold);
            padding: 12px;
            border-radius: 8px;
            margin: 10px 0;
        }
        
        .activity-status {
            display: inline-block;
            padding: 2px 8px;
            border-radius: 12px;
            font-size: 0.75rem;
            font-weight: 600;
            margin-left: 8px;
        }
        
        .status-completed {
            background: #E8F8F3;
            color: var(--primary-green);
        }
        
        .status-current {
            background: var(--primary-green);
            color: white;
            animation: pulse 2s infinite;
        }
        
        .status-upcoming {
            background: #FFF5E6;
            color: #F39C12;
        }
        
        .status-future {
            background: #E8F4F8;
            color: var(--primary-blue);
        }
        
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.8; }
        }
        
        .countdown-timer {
            background: var(--primary-blue);
            color: white;
            padding: 8px 12px;
            border-radius: 20px;
            display: inline-block;
            font-size: 0.85rem;
            font-weight: 600;
            margin-top: 5px;
        }
        
        .trip-progress {
            background: #f0f0f0;
            border-radius: 10px;
            height: 10px;
            margin: 15px 0;
            overflow: hidden;
            position: relative;
        }
        
        .trip-progress-bar {
            background: linear-gradient(90deg, var(--primary-blue) 0%, var(--primary-green) 100%);
            height: 100%;
            transition: width 1s ease;
            border-radius: 10px;
        }
        
        .day-card.today {
            border: 3px solid var(--primary-green);
            box-shadow: 0 4px 20px rgba(0, 175, 102, 0.2);
        }
        
        .day-card.past {
            opacity: 0.6;
            background: #f5f5f5;
        }
        
        .schedule-item.past-activity {
            opacity: 0.5;
        }
        
        .schedule-item.current-activity {
            background: linear-gradient(135deg, #E8F8F3 0%, #D4EFDF 100%);
            border-left-color: var(--primary-green);
            border-left-width: 5px;
            animation: highlight 2s ease-in-out infinite;
        }
        
        @keyframes highlight {
            0%, 100% { box-shadow: 0 0 0 0 rgba(0, 175, 102, 0.3); }
            50% { box-shadow: 0 0 20px 5px rgba(0, 175, 102, 0.3); }
        }
        
        .notification-badge {
            position: fixed;
            bottom: 100px;
            right: 20px;
            background: var(--primary-red);
            color: white;
            padding: 12px 20px;
            border-radius: 25px;
            box-shadow: 0 4px 15px rgba(228, 0, 43, 0.3);
            display: none;
            z-index: 1000;
            animation: slideIn 0.5s ease;
        }
        
        @keyframes slideIn {
            from { transform: translateX(400px); }
            to { transform: translateX(0); }
        }
        
        .floating-today-btn {
            position: fixed;
            bottom: 90px;
            left: 20px;
            background: linear-gradient(135deg, var(--primary-blue) 0%, var(--primary-green) 100%);
            color: white;
            padding: 12px 20px;
            border-radius: 25px;
            box-shadow: 0 4px 15px rgba(0, 146, 188, 0.3);
            text-decoration: none;
            font-weight: 600;
            display: none;
            z-index: 998;
            transition: all 0.3s ease;
        }
        
        .floating-today-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 20px rgba(0, 146, 188, 0.4);
        }
        
        .smart-reminder {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: white;
            padding: 25px;
            border-radius: 15px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.2);
            z-index: 2000;
            max-width: 400px;
            display: none;
        }
        
        .smart-reminder h3 {
            color: var(--primary-blue);
            margin-bottom: 10px;
        }
        
        .smart-reminder button {
            background: var(--primary-green);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 8px;
            cursor: pointer;
            margin-top: 15px;
        }
        
        /* Mobile adjustments for live features */
        @media (max-width: 768px) {
            .live-widget {
                position: fixed;
                top: auto;
                bottom: 20px;
                right: 20px;
                left: auto;
                max-width: 280px;
                min-width: 250px;
                box-shadow: 0 4px 25px rgba(0,0,0,0.3);
                z-index: 998;
            }
            
            .live-widget.collapsed {
                min-width: 60px;
                max-width: 60px;
            }
            
            .floating-today-btn {
                bottom: 20px;
                left: 20px;
                z-index: 997;
            }
            
            .notification-badge {
                bottom: auto;
                top: 70px;
                right: 10px;
                left: auto;
                max-width: 250px;
            }
        }
        
        @media (max-width: 480px) {
            /* On mobile phones, make it a top bar below navigation */
            .live-widget {
                position: fixed;
                top: 60px;
                right: 10px;
                left: 10px;
                bottom: auto;
                max-width: none;
                min-width: auto;
                z-index: 998;
                border-radius: 8px;
                padding: 12px;
            }
            
            .live-widget.collapsed {
                left: auto;
                right: 10px;
                width: auto;
                min-width: 150px;
                max-width: 150px;
            }
            
            .live-widget .live-time {
                font-size: 1.4rem;
            }
            
            .live-widget .live-date {
                font-size: 0.8rem;
            }
            
            .live-widget.collapsed .live-content {
                display: block;
            }
            
            .live-widget.collapsed .trip-progress,
            .live-widget.collapsed #currentActivityInfo,
            .live-widget.collapsed #nextActivityInfo,
            .live-widget.collapsed button[onclick*="scrollToToday"] {
                display: none;
            }
            
            .live-widget.collapsed .live-time,
            .live-widget.collapsed .live-date {
                display: block;
            }
            
            .floating-today-btn {
                bottom: 20px;
                left: 10px;
                right: auto;
                padding: 10px 15px;
                font-size: 0.9rem;
            }
            
            .day-card {
                scroll-margin-top: 140px;
            }
        }
    </style>
</head>
<body>
    <!-- Simple Mobile Menu Button - Always visible on phones -->
    <style>
        @media screen and (max-width: 600px) {
            #simpleMobileMenu {
                display: block !important;
                position: fixed !important;
                bottom: 20px !important;
                right: 20px !important;
                width: 60px !important;
                height: 60px !important;
                background: #0092BC !important;
                border-radius: 50% !important;
                border: none !important;
                color: white !important;
                font-size: 28px !important;
                box-shadow: 0 4px 12px rgba(0,0,0,0.4) !important;
                z-index: 99999 !important;
                cursor: pointer !important;
            }
            
            #simpleMobilePanel {
                display: none;
                position: fixed !important;
                bottom: 0 !important;
                left: 0 !important;
                right: 0 !important;
                background: white !important;
                padding: 20px !important;
                border-radius: 20px 20px 0 0 !important;
                box-shadow: 0 -4px 20px rgba(0,0,0,0.3) !important;
                z-index: 99998 !important;
            }
            
            #simpleMobilePanel.show {
                display: block !important;
            }
            
            #simpleMobileOverlay {
                display: none;
                position: fixed !important;
                top: 0 !important;
                left: 0 !important;
                right: 0 !important;
                bottom: 0 !important;
                background: rgba(0,0,0,0.5) !important;
                z-index: 99997 !important;
            }
            
            #simpleMobileOverlay.show {
                display: block !important;
            }
            
            /* Hide desktop elements */
            .live-widget, .edit-controls {
                display: none !important;
            }
        }
        
        @media screen and (min-width: 601px) {
            #simpleMobileMenu, #simpleMobilePanel, #simpleMobileOverlay {
                display: none !important;
            }
        }
    </style>
    
    <button id="simpleMobileMenu" onclick="toggleSimpleMenu()">☰</button>
    
    <div id="simpleMobileOverlay" onclick="toggleSimpleMenu()"></div>
    
    <div id="simpleMobilePanel">
        <!-- Mobile Live Widget Section -->
        <div id="mobileLiveSection" style="background: linear-gradient(135deg, #0092BC 0%, #00AF66 100%); border-radius: 12px; padding: 20px; margin-bottom: 20px; text-align: center; color: white;">
            <div id="mobileLiveTime" style="font-size: 2rem; font-weight: bold; margin-bottom: 5px;">00:00</div>
            <div id="mobileLiveDate" style="font-size: 0.9rem; opacity: 0.95; margin-bottom: 15px;">Loading...</div>

            <div id="mobileTripStatus" style="background: rgba(255,255,255,0.2); border-radius: 8px; padding: 12px; margin-bottom: 10px;">
                <div id="mobileCurrentActivity" style="font-size: 0.95rem; font-weight: 500;">
                    🎉 Get Ready!<br>
                    <span style="font-size: 0.85rem; opacity: 0.9;">Your Azerbaijan adventure begins soon!</span>
                </div>
            </div>

            <div style="background: rgba(255,255,255,0.2); border-radius: 8px; padding: 8px;">
                <div style="height: 6px; background: rgba(255,255,255,0.3); border-radius: 3px; overflow: hidden;">
                    <div id="mobileTripProgress" style="height: 100%; background: white; width: 0%; transition: width 0.3s ease;"></div>
                </div>
                <div id="mobileTripDays" style="font-size: 0.75rem; margin-top: 5px; opacity: 0.9;">Trip starts in 12 days</div>
            </div>
        </div>

        <h3 style="text-align: center; margin-bottom: 15px; color: #2C3E50;">Quick Controls</h3>
        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px;">
            <button onclick="toggleEditMode(); toggleSimpleMenu();" style="padding: 12px; background: #0092BC; color: white; border: none; border-radius: 8px;">✏️ Edit</button>
            <button onclick="window.print(); toggleSimpleMenu();" style="padding: 12px; background: #00AF66; color: white; border: none; border-radius: 8px;">📄 PDF</button>
            <button onclick="saveDocument(); toggleSimpleMenu();" style="padding: 12px; background: #FDB813; color: black; border: none; border-radius: 8px;">💾 Save</button>
            <button onclick="scrollToToday(); toggleSimpleMenu();" style="padding: 12px; background: #E4002B; color: white; border: none; border-radius: 8px;">📍 Today</button>
        </div>
        <button onclick="toggleSimpleMenu()" style="width: 100%; margin-top: 20px; padding: 10px; background: #f0f0f0; border: 1px solid #ddd; border-radius: 8px;">Close</button>
    </div>
    
    <script>
        function toggleSimpleMenu() {
            const panel = document.getElementById('simpleMobilePanel');
            const overlay = document.getElementById('simpleMobileOverlay');
            
            if (panel.classList.contains('show')) {
                panel.classList.remove('show');
                overlay.classList.remove('show');
            } else {
                panel.classList.add('show');
                overlay.classList.add('show');
            }
        }
    </script>
    
    <!-- Live Travel Companion Widget -->
    <div class="live-widget" id="liveWidget">
        <button onclick="toggleLiveWidget()" class="live-widget-toggle" title="Collapse/Expand">◀</button>
        <button onclick="closeLiveWidget()" class="live-widget-close" title="Close Widget">×</button>
        <div class="live-content" id="liveContent">
            <div class="live-time" id="liveTime">--:--</div>
            <div class="live-date" id="liveDate">Loading...</div>
            <div class="trip-progress">
                <div class="trip-progress-bar" id="tripProgress" style="width: 0%"></div>
            </div>
            <div id="currentActivityInfo"></div>
            <div id="nextActivityInfo"></div>
            <button onclick="scrollToToday()" style="width: 100%; margin-top: 10px; padding: 8px; background: var(--primary-blue); color: white; border: none; border-radius: 8px; cursor: pointer;">📍 Go to Today</button>
        </div>
    </div>
    
    <!-- Smart Reminder Modal -->
    <div class="smart-reminder" id="smartReminder">
        <h3 id="reminderTitle">⏰ Activity Reminder</h3>
        <p id="reminderContent"></p>
        <button onclick="dismissReminder()">Got it!</button>
    </div>
    
    <!-- Floating Today Button -->
    <a href="#" class="floating-today-btn" id="todayBtn" onclick="scrollToToday(); return false;">📅 Jump to Today</a>
    
    <!-- Notification Badge -->
    <div class="notification-badge" id="notificationBadge"></div>
    
    <!-- Edit Controls -->
    <div class="edit-controls">
        <div class="edit-mode-indicator">📝 EDIT MODE</div>
        <button class="edit-btn" onclick="toggleEditMode()">Enable Editing</button>
        <button class="edit-btn" onclick="saveDocument()" style="display: none;">💾 Save HTML</button>
        <button class="edit-btn" onclick="window.print()" style="background: var(--primary-green);">🖨️ Print/PDF</button>
    </div>
    
    <!-- Edit Instructions -->
    <div class="edit-instructions">
        <h4>📝 Editing Tips</h4>
        <ul>
            <li>Click any text to edit</li>
            <li>Press Enter for new line</li>
            <li>Use "Add Activity" buttons</li>
            <li>Save your changes regularly</li>
            <li>Print to PDF to share</li>
        </ul>
    </div>
    
    <header class="header">
        <h1>🇦🇿 Your Complete 11-Day Azerbaijan Adventure</h1>
        <p>November 15-25, 2025 | From Ancient Silk Road to Modern Marvels</p>
    </header>

    <div style="background: white; padding: 25px 20px; text-align: center; box-shadow: 0 4px 15px rgba(0,0,0,0.08); position: relative; overflow: hidden;">
        <div style="position: absolute; top: 0; left: 0; right: 0; height: 4px; background: linear-gradient(90deg, #0092BC 0%, #00AF66 33%, #FDB813 66%, #E4002B 100%);"></div>
        <div style="display: inline-block; padding: 12px 40px; background: linear-gradient(135deg, #f8f9fa 0%, #ffffff 50%, #f8f9fa 100%); border: 2px solid transparent; border-image: linear-gradient(135deg, #0092BC, #00AF66) 1; border-radius: 30px; box-shadow: 0 3px 10px rgba(0,146,188,0.15);">
            <p style="color: #2C3E50; font-size: 1.1rem; font-weight: 600; margin: 0; letter-spacing: 3px; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; text-transform: uppercase;">Crafted by</p>
            <p style="background: linear-gradient(135deg, #0092BC 0%, #00AF66 100%); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text; font-size: 1.8rem; font-weight: 700; margin: 5px 0 0 0; letter-spacing: 4px; font-family: 'Georgia', serif;">ESSAM</p>
        </div>
        <div style="position: absolute; bottom: 0; left: 0; right: 0; height: 4px; background: linear-gradient(90deg, #E4002B 0%, #FDB813 33%, #00AF66 66%, #0092BC 100%);"></div>
    </div>

    <nav class="nav-container">
        <div class="nav">
            <a href="#overview" class="nav-btn">Overview</a>
            <a href="#day1" class="nav-btn">Day 1</a>
            <a href="#day2" class="nav-btn">Day 2</a>
            <a href="#day3" class="nav-btn">Day 3</a>
            <a href="#day4" class="nav-btn">Day 4</a>
            <a href="#day5" class="nav-btn">Day 5</a>
            <a href="#day6" class="nav-btn">Day 6</a>
            <a href="#day7" class="nav-btn">Day 7</a>
            <a href="#day8" class="nav-btn">Day 8</a>
            <a href="#day9" class="nav-btn">Day 9</a>
            <a href="#day10" class="nav-btn">Day 10</a>
            <a href="#day11" class="nav-btn">Day 11</a>
            <a href="#budget" class="nav-btn">Budget</a>
            <a href="#tips" class="nav-btn">Tips</a>
            <a href="#checklist" class="nav-btn">Checklist</a>
        </div>
    </nav>

    <div class="container">
        <!-- Overview Section -->
        <section id="overview">
            <div class="critical-info">
                <h2>Critical Pre-Trip Information</h2>
                
                <div class="stats-container">
                    <div class="stat-card">
                        <div class="stat-number">9.5-10</div>
                        <div class="stat-label">Hours of Daylight</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number">11-16°C</div>
                        <div class="stat-label">Baku Temperature</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number">450 AZN</div>
                        <div class="stat-label">Rental Car Total</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number">1,360 km</div>
                        <div class="stat-label">Total Driving</div>
                    </div>
                </div>

                <div class="info-box warning">
                    <strong>⚠️ IMPORTANT SHAHDAG ALERT:</strong> November is off-season. Pik Palace may have limited operations. 
                    Call ahead (+994 12-310-2010) to confirm hotel is open and which facilities are operational. 
                    Most activities (skiing, cable cars, adventure sports) will be closed.
                </div>

                <h3>Weather Expectations</h3>
                <ul>
                    <li><strong>Baku:</strong> 11-16°C (52-61°F), occasional rain</li>
                    <li><strong>Mountains:</strong> 5-10°C (41-50°F), colder at night</li>
                    <li><strong>Pack:</strong> Layers, warm jacket, waterproof gear, comfortable walking shoes</li>
                </ul>

                <h3>November Daylight Hours</h3>
                <p>Sunrise ~7:10-7:43 AM | Sunset ~5:15-5:37 PM (only 9.5-10 hours daylight)</p>
                
                <h3>Rental Car Information</h3>
                <p><strong>Total Cost:</strong> 450 AZN (~$265 USD) for 11 days</p>
            </div>
        </section>

        <!-- Day 1 -->
        <div id="day1" class="day-card">
            <div class="day-header">
                <h2 class="day-title" contenteditable="true">Day 1 - Arrival in Baku</h2>
                <span class="day-date" contenteditable="true">Friday, November 15</span>
            </div>
            
            <div class="info-box">
                <strong>Flight:</strong> <span contenteditable="true">Azerbaijan Airlines J21092 from Jeddah arrives ~6:00-7:00 PM</span>
            </div>

            <div class="schedule-item">
                <span class="time-badge" contenteditable="true">6:30-7:30 PM</span>
                <h3 contenteditable="true">
                    Arrival & Car Rental Pickup
                    <button class="info-btn" onclick="showBookingInfo('car-rental')">ℹ️ Info</button>
                </h3>
                <ul>
                    <li contenteditable="true">Clear customs and immigration</li>
                    <li contenteditable="true">Pick up rental car at Heydar Aliyev International Airport</li>
                    <li contenteditable="true">Reservation #: 1086 (Buta Rental Cars)</li>
                    <li contenteditable="true">Vehicle: Hyundai Accent</li>
                    <li contenteditable="true">Distance to hotel: 25 km, 35-40 minutes drive</li>
                </ul>
            </div>

            <div class="schedule-item">
                <span class="time-badge" contenteditable="true">8:00-8:30 PM</span>
                <h3 contenteditable="true">
                    Check-in at Boutique Hotel Baku
                    <button class="info-btn" onclick="showBookingInfo('day1-hotel')">ℹ️ Info</button>
                </h3>
                <ul>
                    <li contenteditable="true">Get settled, freshen up</li>
                    <li contenteditable="true">Ask reception for Baku city map and restaurant recommendations</li>
                </ul>
            </div>

            <div class="schedule-item">
                <span class="time-badge" contenteditable="true">8:30-10:00 PM</span>
                <h3 contenteditable="true">Welcome Dinner</h3>
                <div class="restaurant">
                    <span class="restaurant-name" contenteditable="true">Firuze Restaurant</span>
                    <p contenteditable="true">📍 Tarlan Aliyarbeyov St 14, basement of Fountain Square</p>
                    <p contenteditable="true">Traditional Azerbaijani cuisine, excellent plov</p>
                    <p contenteditable="true">💰 Budget: 15-20 AZN per person</p>
                    <a href="https://www.google.com/maps/place/firuze+restaurant/data=!4m2!3m1!1s0x40307db6dbd373e3:0x8c437de271ebabfe?sa=X&ved=1t:242&ictx=111" target="_blank" class="info-btn" style="text-decoration: none; display: inline-flex; margin-top: 8px;">🗺️ View on Map</a>
                </div>
            </div>
            
            <button class="add-activity-btn" onclick="addActivity(this)">+ Add Activity</button>

            <div class="info-box success">
                <strong>Sunset today:</strong> <span contenteditable="true">5:32 PM (already dark on arrival)</span>
            </div>
        </div>

        <!-- Day 2 -->
        <div id="day2" class="day-card">
            <div class="day-header">
                <h2 class="day-title">Day 2 - Baku Old City Deep Dive</h2>
                <span class="day-date">Saturday, November 16</span>
            </div>

            <p><strong>Start time:</strong> 9:00 AM (after sunrise at 7:15 AM)</p>

            <h3>Morning: Old City Exploration</h3>

            <div class="schedule-item">
                <span class="time-badge">9:30-10:00 AM</span>
                <h3>
                    Drive to Old City
                    <a href="https://www.google.com/maps/dir//Old+City+Baku,+Baku,+Azerbaijan/data=!4m7!4m6!1m1!4e2!1m2!1m1!1s0x40307d43c42c1e99:0xe76c34d923ba27d0!3e0?sa=X&ved=1t:2040&ictx=111" target="_blank" class="info-btn" style="text-decoration: none; display: inline-flex;">🗺️ Directions</a>
                </h3>
                <ul>
                    <li>Park outside city walls (limited parking inside)</li>
                    <li>Parking fee: ~5 AZN for day</li>
                    <li>Walk through Double Gates entrance</li>
                </ul>
            </div>

            <div class="schedule-item">
                <span class="time-badge">10:00 AM-12:30 PM</span>
                <h3>Old City Walking Tour</h3>
                
                <h4>10:00-11:00 AM: Maiden Tower</h4>
                <ul>
                    <li>Address: Old City (Icherisheher), Baku</li>
                    <li>Hours: 9:00 AM - 6:00 PM</li>
                    <li>Entry: 15 AZN</li>
                    <li>Climb the 29.5m tower for panoramic views of Caspian Sea</li>
                </ul>

                <h4>11:15 AM-12:30 PM: Palace of Shirvanshahs</h4>
                <ul>
                    <li>Entry: 15 AZN (full complex access)</li>
                    <li>UNESCO World Heritage Site</li>
                    <li>Explore: Main palace, Divankhana, burial vaults, Shah's mosque, bathhouse</li>
                </ul>
            </div>

            <div class="schedule-item">
                <span class="time-badge">12:30-1:45 PM</span>
                <h3>Lunch Break</h3>
                <div class="restaurant">
                    <span class="restaurant-name">Qaynana Restaurant</span>
                    <p>📍 Kichik Gala St, through Double Gates</p>
                    <p>Try: Təndir çörəyi (tandir bread), kutabs, kebabs</p>
                    <p>💰 Budget: 10-12 AZN per person</p>
                    <a href="https://www.google.com/maps/place/qaynana+restaurant+baku/data=!4m2!3m1!1s0x40307db68b99a35d:0x7ea5e6f312b0bf39?sa=X&ved=1t:242&ictx=111" target="_blank" class="info-btn" style="text-decoration: none; display: inline-flex; margin-top: 8px;">🗺️ View on Map</a>
                </div>
            </div>

            <h3>Afternoon: Old City Shopping & Modern Baku</h3>

            <div class="schedule-item">
                <span class="time-badge">1:45-3:30 PM</span>
                <h3>Old City Shopping Reconnaissance</h3>
                <ul>
                    <li>Browse carpet shops (don't buy yet - compare prices first)</li>
                    <li>Visit Folk Art shop (15 Qesr St) for quality handicrafts</li>
                    <li>Scout copperware, ceramics, traditional crafts</li>
                    <li class="highlight">Note prices for comparison later in Sheki</li>
                </ul>
            </div>

            <div class="schedule-item">
                <span class="time-badge">4:00-5:00 PM</span>
                <h3>
                    Highland Park for Sunset
                    <a href="https://www.google.com/maps/place/highland+park+baku/data=!4m2!3m1!1s0x40307c2d84c3929d:0xa6b1b701ada62d46?sa=X&ved=1t:155783&ictx=111" target="_blank" class="info-btn" style="text-decoration: none; display: inline-flex;">🗺️ View on Map</a>
                </h3>
                <ul>
                    <li>Option 1: Take funicular from Carpet Museum area (1 AZN, 4 min ride)</li>
                    <li>Option 2: Drive up and park</li>
                    <li><strong>Best views in Baku:</strong> Panoramic vista of city, Flame Towers, Caspian Sea</li>
                    <li>Arrive before 5:30 PM sunset</li>
                </ul>
            </div>

            <div class="schedule-item">
                <span class="time-badge">6:30-8:00 PM</span>
                <h3>Dinner</h3>
                <div class="restaurant">
                    <span class="restaurant-name">Art Club Restaurant</span>
                    <p>📍 Asef Zeynalli St, Old City</p>
                    <p>18th-century townhouse with art gallery</p>
                    <p>Famous for: Dushbara soup, shah plov, live tar music</p>
                    <p>💰 Budget: 15-25 AZN per person</p>
                    <a href="https://www.google.com/maps/place/Art+Club+Restaurant/data=!4m2!3m1!1s0x40307d2b1b2b2b91:0x656b687ec80826e8?sa=X&ved=1t:242&ictx=111" target="_blank" class="info-btn" style="text-decoration: none; display: inline-flex; margin-top: 8px;">🗺️ View on Map</a>
                </div>
            </div>

            <div class="info-box success">
                <strong>Driving today:</strong> Minimal (just to/from Old City)<br>
                <strong>Sunset:</strong> 5:31 PM
            </div>

            <div class="schedule-item">
                <h3>
                    🏨 Accommodation: East Legend Hotel
                    <button class="info-btn" onclick="showBookingInfo('day3-hotel')">ℹ️ Info</button>
                </h3>
                <p>Check-in today, staying for 2 nights (Nov 16-18)</p>
            </div>
        </div>

        <!-- Day 3 -->
        <div id="day3" class="day-card">
            <div class="day-header">
                <h2 class="day-title">Day 3 - Gobustan & Mud Volcanoes Day Trip</h2>
                <span class="day-date">Sunday, November 17</span>
            </div>

            <div class="info-box">
                <strong>Note:</strong> November 17 is Constitution Day (national holiday) - attractions open but may be busier
            </div>

            <h3>Gobustan Rock Art & Museum</h3>

            <div class="schedule-item">
                <span class="time-badge">8:30-9:45 AM</span>
                <h3>
                    Drive to Gobustan
                    <a href="https://www.google.com/maps/place/gobustan+baku/data=!4m2!3m1!1s0x403af23d8ccdb76d:0x408618c661af12ac?sa=X&ved=1t:155783&ictx=111" target="_blank" class="info-btn" style="text-decoration: none; display: inline-flex;">🗺️ Directions</a>
                </h3>
                <ul>
                    <li>Distance: 65 km southwest of Baku</li>
                    <li>Driving time: 1 hour via Baku-Shamakhi highway</li>
                </ul>
            </div>

            <div class="schedule-item">
                <span class="time-badge">9:45 AM-12:15 PM</span>
                <h3>Gobustan National Park</h3>
                
                <h4>
                    Gobustan Museum (mandatory first stop)
                    <a href="https://www.google.com/maps/place/gobustan+museum+baku/data=!4m2!3m1!1s0x403af3cc3f72f6fb:0xbcfc2a278ade2cbb?sa=X&ved=1t:155783&ictx=111" target="_blank" class="info-btn" style="text-decoration: none; display: inline-flex; font-size: 0.75rem;">🗺️ Map</a>
                </h4>
                <ul>
                    <li>Entry: 4 AZN</li>
                    <li>Modern interactive museum</li>
                    <li>Displays explain 40,000 years of rock art history</li>
                </ul>

                <h4>Outdoor Petroglyph Trails</h4>
                <ul>
                    <li>6,000+ rock carvings from Stone Age</li>
                    <li>Gaval Dash (musical stone) demonstration</li>
                    <li>No shade - wear hat, bring water</li>
                </ul>
            </div>

            <h3>Mud Volcanoes Excursion</h3>

            <div class="schedule-item">
                <span class="time-badge">12:45-1:30 PM</span>
                <h3>
                    Mud Volcanoes Exploration
                    <a href="https://www.google.com/maps/place/Mud+Volcanoes+Tourism+Complex/data=!4m2!3m1!1s0x403a5f463fcbd475:0xc4a564b90c1eafea?sa=X&ved=1t:242&ictx=111" target="_blank" class="info-btn" style="text-decoration: none; display: inline-flex;">🗺️ View on Map</a>
                </h3>
                <ul>
                    <li>Azerbaijan has ~300 mud volcanoes (half the world's total)</li>
                    <li>Cold bubbling mud craters</li>
                    <li>Lunar-like landscape, very photogenic</li>
                    <li>Walk around craters (careful - slippery ground)</li>
                </ul>
            </div>

            <div class="schedule-item">
                <span class="time-badge">6:30-8:00 PM</span>
                <h3>Dinner in Baku</h3>
                <div class="restaurant">
                    <span class="restaurant-name">Dolma Restaurant</span>
                    <p>📍 53 Istiqlaliyyet St</p>
                    <p>Specializes in 8 types of dolma, vegetarian options</p>
                    <p>💰 Budget: 10-15 AZN per person</p>
                    <a href="https://www.google.com/maps/place/dolma+restaurant+baku/data=!4m2!3m1!1s0x40307db6d0fd208b:0x190fd993d1aeb78c?sa=X&ved=1t:242&ictx=111" target="_blank" class="info-btn" style="text-decoration: none; display: inline-flex; margin-top: 8px;">🗺️ View on Map</a>
                </div>
            </div>

            <div class="info-box success">
                <strong>Total driving today:</strong> 150 km, ~3 hours<br>
                <strong>Sunset:</strong> 5:30 PM
            </div>
        </div>

        <!-- Day 4 -->
        <div id="day4" class="day-card">
            <div class="day-header">
                <h2 class="day-title">Day 4 - Baku Morning → Drive to Shahdag</h2>
                <span class="day-date">Monday, November 18</span>
            </div>

            <div class="info-box warning">
                <strong>⚠️ Note:</strong> Heydar Aliyev Center is CLOSED on Mondays. Alternative plan included.
            </div>

            <h3>Morning: Drive to Shahdag</h3>

            <div class="schedule-item">
                <span class="time-badge">11:00 AM-2:30 PM</span>
                <h3>
                    Drive to Shahdag Mountain Resort
                    <a href="https://www.google.com/maps/dir//Shahdag+Mountain+Resort,+Azerbaijan/@40.9166667,48.0833333,13z" target="_blank" class="info-btn" style="text-decoration: none; display: inline-flex;">🗺️ Directions</a>
                </h3>
                <ul>
                    <li>Distance: 230 km</li>
                    <li>Driving time: 3-3.5 hours</li>
                    <li>Route: M1 Highway north along Caspian coast, then Qusar-Laza Highway</li>
                    <li><strong>Stop at Guba (2 hours in):</strong> Fuel station, restroom break</li>
                </ul>
            </div>

            <div class="schedule-item">
                <span class="time-badge">5:00-5:45 PM</span>
                <h3>
                    Arrive Pik Palace Shahdag & Check-in
                    <button class="info-btn" onclick="showBookingInfo('day4-hotel')">ℹ️ Info</button>
                </h3>
                <ul>
                    <li>Address: Gusar-Laza Road, Km 29, Qusar District</li>
                    <li>Ask reception about open restaurants and spa availability</li>
                </ul>
            </div>

            <div class="info-box success">
                <strong>Total driving today:</strong> 230 km, ~3.5 hours<br>
                <strong>Sunset:</strong> 5:28 PM (arrives at hotel just after sunset)
            </div>
        </div>

        <!-- Day 5 -->
        <div id="day5" class="day-card">
            <div class="day-header">
                <h2 class="day-title">Day 5 - Shahdag Full Day</h2>
                <span class="day-date">Tuesday, November 19</span>
            </div>

            <div class="info-box warning">
                <strong>Reality check:</strong> Limited activities available in November. Focus on spa, relaxation, and scenic drives.
            </div>

            <h3>Morning: Spa & Wellness</h3>

            <div class="schedule-item">
                <span class="time-badge">10:00 AM-1:00 PM</span>
                <h3>Spa Treatments</h3>
                <ul>
                    <li>The Spa with 6-10 treatment rooms</li>
                    <li>Services: Massage, aromatherapy, hammam, sauna, steam room</li>
                    <li>Budget: 50-100 AZN for treatments</li>
                    <li>Contact: +994 12-310-1110 ext. 7000</li>
                </ul>
            </div>

            <h3>Afternoon: Scenic Mountain Drive</h3>

            <div class="schedule-item">
                <span class="time-badge">2:30-4:30 PM</span>
                <h3>Drive to Laza Village</h3>
                <ul>
                    <li>Distance: 30+ km from resort</li>
                    <li>Remote mountain village with traditional stone houses</li>
                    <li>Dramatic cliffs and valley views</li>
                    <li>Return before dark (sunset 5:27 PM)</li>
                </ul>
            </div>

            <div class="schedule-item">
                <span class="time-badge">5:30-7:00 PM</span>
                <h3>Heated Outdoor Pool</h3>
                <p>Unique experience: warm pool, cool mountain air, sunset views</p>
            </div>

            <div class="info-box success">
                <strong>Total driving today:</strong> ~70 km, 2 hours<br>
                <strong>Sunset:</strong> 5:27 PM
            </div>
        </div>

        <!-- Day 6 -->
        <div id="day6" class="day-card">
            <div class="day-header">
                <h2 class="day-title">Day 6 - Shahdag → Baku → Gabala</h2>
                <span class="day-date">Wednesday, November 20</span>
            </div>

            <div class="info-box warning">
                <strong>⚠️ CRITICAL ROUTING DAY:</strong> No direct road Shahdag-Gabala. Must return through Baku (400+ km total, 6-7 hours driving).
            </div>

            <div class="schedule-item">
                <span class="time-badge">10:30 AM-1:30 PM</span>
                <h3>Drive Shahdag to Baku</h3>
                <ul>
                    <li>Distance: 215 km</li>
                    <li>Time: 3 hours</li>
                </ul>
            </div>

            <div class="schedule-item">
                <span class="time-badge">1:30-2:30 PM</span>
                <h3>Lunch Stop in Baku</h3>
                <div class="restaurant">
                    <span class="restaurant-name">Nakhchivan Restaurant</span>
                    <p>📍 Parlament Ave 8A</p>
                    <p>Famous for bughlama (lamb stew)</p>
                </div>
            </div>

            <div class="schedule-item">
                <span class="time-badge">2:30-5:30 PM</span>
                <h3>Drive Baku to Gabala</h3>
                <ul>
                    <li>Distance: 220 km</li>
                    <li>Time: 3 hours</li>
                    <li>Route: M2 highway west toward Shamakhi, then north to Gabala</li>
                </ul>
            </div>

            <div class="info-box success">
                <strong>Total driving today:</strong> 435 km, 6+ hours (longest driving day)<br>
                <strong>Sunset:</strong> 5:25 PM
            </div>

            <div class="schedule-item">
                <h3>
                    🏨 Accommodation: Gabala Karvansaray Hotel
                    <button class="info-btn" onclick="showBookingInfo('day6-hotel')">ℹ️ Info</button>
                </h3>
                <p>Check-in today, staying for 2 nights (Nov 20-22)</p>
            </div>
        </div>

        <!-- Day 7 -->
        <div id="day7" class="day-card">
            <div class="day-header">
                <h2 class="day-title">Day 7 - Gabala Full Day</h2>
                <span class="day-date">Thursday, November 21</span>
            </div>

            <h3>Morning: Tufandag Cable Car</h3>

            <div class="schedule-item">
                <span class="time-badge">10:00 AM-1:00 PM</span>
                <h3>Tufandag Cable Car Experience</h3>
                <ul>
                    <li>Entry: 19-21 AZN per adult</li>
                    <li>Total length: ~6 km, reaches 1,600-1,900m elevation</li>
                    <li>November status: ✓ OPEN year-round</li>
                    <li>At the top: Restaurants, cafes, viewing areas</li>
                </ul>
            </div>

            <h3>Afternoon: Nohur Lake</h3>

            <div class="schedule-item">
                <span class="time-badge">2:45-4:30 PM</span>
                <h3>Nohur Lake Visit</h3>
                <ul>
                    <li>Altitude: 700m between mountains</li>
                    <li>Entry: FREE</li>
                    <li>Activities: Walk around lake, boating (10 AZN), horse riding</li>
                    <li>Peaceful off-season atmosphere</li>
                </ul>
            </div>

            <div class="info-box success">
                <strong>Total driving today:</strong> ~20 km, minimal<br>
                <strong>Sunset:</strong> 5:24 PM
            </div>
        </div>

        <!-- Day 8 -->
        <div id="day8" class="day-card">
            <div class="day-header">
                <h2 class="day-title">Day 8 - Gabala Morning → Sheki</h2>
                <span class="day-date">Friday, November 22</span>
            </div>

            <div class="schedule-item">
                <span class="time-badge">12:30-2:00 PM</span>
                <h3>Drive Gabala to Sheki</h3>
                <ul>
                    <li>Distance: 85-90 km</li>
                    <li>Time: 1.5 hours</li>
                    <li>Scenic mountain drive</li>
                </ul>
            </div>

            <div class="schedule-item">
                <span class="time-badge">2:00-2:30 PM</span>
                <h3>
                    Check-in at Marxal Resort & Spa
                    <button class="info-btn" onclick="showBookingInfo('day8-hotel')">ℹ️ Info</button>
                </h3>
                <ul>
                    <li>Location: Kish Village</li>
                    <li>5-star luxury resort: 206 rooms + 168 cottages</li>
                    <li>Surrounded by mountains</li>
                </ul>
            </div>

            <h3>Afternoon: Kish Albanian Church</h3>

            <div class="schedule-item">
                <span class="time-badge">3:15-4:30 PM</span>
                <h3>Church of Kish</h3>
                <ul>
                    <li>Entry: 2 AZN, guided tour 5 AZN (recommended)</li>
                    <li>12th-century Georgian Orthodox church</li>
                    <li>Ancient worship site dating to ~3000 BC</li>
                    <li>Glass-covered ancient graves with 2-meter skeletons</li>
                </ul>
            </div>

            <div class="info-box success">
                <strong>Total driving today:</strong> 90 km, 1.5 hours<br>
                <strong>Sunset:</strong> 5:22 PM
            </div>
        </div>

        <!-- Day 9 -->
        <div id="day9" class="day-card">
            <div class="day-header">
                <h2 class="day-title">Day 9 - Sheki Full Day + Shopping</h2>
                <span class="day-date">Saturday, November 23</span>
            </div>

            <h3>Morning: Khan's Palace & Castle Complex</h3>

            <div class="schedule-item">
                <span class="time-badge">10:00 AM-12:00 PM</span>
                <h3>Khan's Palace & Castle Complex</h3>
                
                <h4>Khan's Palace</h4>
                <ul>
                    <li>Entry: 9 AZN foreigners</li>
                    <li><strong class="highlight">Combination ticket: Palace + museums = 10 AZN (BEST VALUE)</strong></li>
                    <li>18th-century palace completed 1762</li>
                    <li>Famous for shebeke stained glass windows</li>
                    <li>UNESCO World Heritage Site (2019)</li>
                    <li>⚠️ PHOTOGRAPHY PROHIBITED INSIDE (CCTV enforced)</li>
                </ul>
            </div>

            <div class="schedule-item">
                <span class="time-badge">12:00-1:15 PM</span>
                <h3>Lunch - MUST TRY PITI</h3>
                <div class="restaurant">
                    <span class="restaurant-name">Gagarin Restaurant</span>
                    <p>📍 Salman Mumtaz/Azadlyg St</p>
                    <p><strong>Famous for: "Best piti in the world"</strong> (6 AZN per serving)</p>
                </div>
            </div>

            <h3 style="background: linear-gradient(120deg, #FFD700 0%, #FFA500 100%); padding: 10px; border-radius: 8px; color: white;">
                1:30-4:30 PM - SERIOUS GIFT SHOPPING IN SHEKI ★★★
            </h3>
            
            <div class="info-box success">
                <strong>This is your BEST shopping opportunity - better prices and quality than Baku</strong>
            </div>

            <div class="schedule-item">
                <h3>Priority Shopping Locations</h3>
                
                <h4>Shopping Budget Guidelines:</h4>
                <ul>
                    <li>5-8 kelaghayi scarves @ 40-60 AZN each = 240-480 AZN</li>
                    <li>5-7 copper items @ 25-40 AZN = 125-280 AZN</li>
                    <li>Sheki halva packages @ 8-15 AZN × 10 = 80-150 AZN</li>
                    <li>Small shebeke pieces @ 30-50 AZN × 3 = 90-150 AZN</li>
                    <li><strong>Total: ~535-1,060 AZN</strong></li>
                </ul>

                <h4>Shopping Strategy:</h4>
                <ul>
                    <li>BUY traditional crafts here (15-25% cheaper than Baku)</li>
                    <li>Focus on: Kelaghayi silk scarves, copperware, shebeke glass</li>
                    <li>Bargain confidently (aim for 20-30% reduction)</li>
                    <li>Buy multiples from same vendor for better discounts</li>
                </ul>
            </div>

            <div class="info-box success">
                <strong>Total driving today:</strong> ~25 km, minimal<br>
                <strong>Sunset:</strong> 5:20 PM
            </div>
        </div>

        <!-- Day 10 -->
        <div id="day10" class="day-card">
            <div class="day-header">
                <h2 class="day-title">Day 10 - Sheki → Baku + Final Shopping</h2>
                <span class="day-date">Sunday, November 24</span>
            </div>

            <div class="schedule-item">
                <span class="time-badge">9:30 AM-2:00 PM</span>
                <h3>Drive Sheki to Baku</h3>
                <ul>
                    <li>Distance: 300 km via M2 highway</li>
                    <li>Time: 4.5-5 hours</li>
                    <li>Long, curvy road through mountains</li>
                </ul>
            </div>

            <h3>Afternoon: FINAL GIFT SHOPPING IN BAKU</h3>

            <div class="schedule-item">
                <span class="time-badge">3:30-6:00 PM</span>
                <h3>Taza Bazaar Final Shopping Push</h3>
                
                <h4>Shopping List:</h4>
                <ul>
                    <li>Spice packets @ 5-10 AZN × 10-15 = 50-150 AZN</li>
                    <li>Armudu tea glass sets @ 35-50 AZN × 3 = 105-150 AZN</li>
                    <li>Packaged sweets @ 10-20 AZN × 8-10 = 80-200 AZN</li>
                    <li>Pomegranate products @ 12-20 AZN × 5 = 60-100 AZN</li>
                    <li>Saffron @ 20-30 AZN × 3-4 = 60-120 AZN</li>
                    <li><strong>Total: 430-865 AZN</strong></li>
                </ul>

                <h4>Bargaining Tactics:</h4>
                <ul>
                    <li>You've seen prices in Sheki - use this knowledge</li>
                    <li>For saffron: Start at 50% of asking price</li>
                    <li>Cash payment gets better deals</li>
                    <li>Aim for 20-30% off initial prices</li>
                </ul>
            </div>

            <div class="info-box warning">
                <strong>9:30 PM - PACK FOR TOMORROW'S EARLY DEPARTURE</strong>
                <ul>
                    <li>Set 3 alarms for 5:00 AM</li>
                    <li>Pack everything except morning essentials</li>
                    <li>Keep documents, tickets, rental car keys accessible</li>
                </ul>
            </div>

            <div class="info-box success">
                <strong>Total driving today:</strong> 300 km, 5 hours<br>
                <strong>Sunset:</strong> 5:19 PM
            </div>
        </div>

        <!-- Day 11 -->
        <div id="day11" class="day-card">
            <div class="day-header">
                <h2 class="day-title">Day 11 - EARLY DEPARTURE DAY</h2>
                <span class="day-date">Monday, November 25</span>
            </div>

            <div class="info-box warning">
                <strong>Flight:</strong> 9:00 AM departure - requires 5:00 AM wake-up for 6:00 AM airport arrival
            </div>

            <h3>Pre-Dawn Departure</h3>

            <div class="schedule-item">
                <span class="time-badge">5:00 AM</span>
                <h3>Wake up (multiple alarms!)</h3>
            </div>

            <div class="schedule-item">
                <span class="time-badge">6:00-6:45 AM</span>
                <h3>Drive to Airport</h3>
                <ul>
                    <li>Distance: 25 km from city center</li>
                    <li>Time: 30-40 minutes (minimal traffic)</li>
                </ul>
            </div>

            <div class="schedule-item">
                <span class="time-badge">6:45-7:15 AM</span>
                <h3>Return Rental Car</h3>
                <ul>
                    <li>Check for any damages</li>
                    <li>Get receipt for rental return</li>
                </ul>
            </div>

            <div class="schedule-item">
                <span class="time-badge">9:00 AM</span>
                <h3>Flight Departure</h3>
            </div>
        </div>

        <!-- Budget Summary -->
        <div id="budget" class="day-card">
            <h2 class="day-title">💰 Comprehensive Budget Summary</h2>
            
            <table>
                <thead>
                    <tr>
                        <th>Category</th>
                        <th>AZN</th>
                        <th>USD (approx)</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><strong>Transportation</strong></td>
                        <td></td>
                        <td></td>
                    </tr>
                    <tr>
                        <td>• Rental car (11 days)</td>
                        <td>450</td>
                        <td>$265</td>
                    </tr>
                    <tr>
                        <td>• Fuel estimate</td>
                        <td>150-200</td>
                        <td>$88-118</td>
                    </tr>
                    <tr>
                        <td>• Parking fees</td>
                        <td>40</td>
                        <td>$24</td>
                    </tr>
                    <tr>
                        <td><strong>Meals</strong> (excluding hotel breakfast)</td>
                        <td>385</td>
                        <td>$226</td>
                    </tr>
                    <tr>
                        <td><strong>Attractions</strong></td>
                        <td>82</td>
                        <td>$48</td>
                    </tr>
                    <tr>
                        <td><strong>Spa & Wellness</strong></td>
                        <td>75</td>
                        <td>$44</td>
                    </tr>
                    <tr>
                        <td><strong>Gift Shopping</strong></td>
                        <td>500-900</td>
                        <td>$294-529</td>
                    </tr>
                    <tr>
                        <td><strong>Miscellaneous</strong></td>
                        <td>100</td>
                        <td>$59</td>
                    </tr>
                    <tr style="background: var(--primary-blue); color: white;">
                        <td><strong>TOTAL (excluding hotels)</strong></td>
                        <td><strong>1,982-2,082</strong></td>
                        <td><strong>$1,165-1,224</strong></td>
                    </tr>
                </tbody>
            </table>

            <div class="info-box">
                <p><strong>Exchange Rate:</strong> 1 AZN ≈ $0.59 USD (check current rate)</p>
                <p><strong>Note:</strong> Hotel costs not included as already booked</p>
            </div>
        </div>

        <!-- Essential Tips -->
        <div id="tips" class="day-card">
            <h2 class="day-title">📌 Essential Tips & Reminders</h2>

            <h3>Driving Tips</h3>
            <ul>
                <li><strong>Navigation:</strong> Use Waze (preferred by locals) or Google Maps with offline maps</li>
                <li><strong>Speed cameras:</strong> Common on M1/M2 highways, fines 10-300 AZN</li>
                <li><strong>Night driving:</strong> Avoid in rural/mountain areas</li>
            </ul>

            <h3>Money & Payments</h3>
            <ul>
                <li><strong>Cash:</strong> Bring sufficient AZN for markets and small vendors</li>
                <li><strong>Cards:</strong> Accepted at hotels, modern restaurants, but NOT at bazaars</li>
                <li><strong>ATMs:</strong> Widely available in cities, less so in mountain areas</li>
            </ul>

            <h3>Shopping Strategy Recap</h3>
            <ol>
                <li><strong>Day 2:</strong> Scout prices at Taza Bazaar - DON'T buy yet</li>
                <li><strong>Day 9 (Sheki):</strong> BUY traditional crafts, silk scarves (best prices)</li>
                <li><strong>Day 10 (Baku):</strong> BUY spices, tea sets, packaged foods</li>
            </ol>

            <h3>Photography Notes</h3>
            <ul>
                <li><strong>Allowed:</strong> Most locations, Old City streets, landscapes</li>
                <li><strong>PROHIBITED:</strong> Inside Khan's Palace (CCTV enforced, fines)</li>
                <li><strong>Golden hour:</strong> Limited due to early sunset (~5:15-5:35 PM)</li>
            </ul>

            <h3>Emergency Contacts</h3>
            <ul>
                <li>Universal Emergency: 112</li>
                <li>Police: 102</li>
                <li>Ambulance: 103</li>
                <li>Pik Palace Shahdag: +994 12-310-2010</li>
            </ul>
        </div>

        <!-- Final Checklist -->
        <div id="checklist" class="day-card">
            <h2 class="day-title">✓ Final Pre-Trip Checklist</h2>

            <div class="checklist">
                <h3>2 Weeks Before</h3>
                <label><input type="checkbox"> Call Pik Palace Shahdag to confirm November operations</label>
                <label><input type="checkbox"> Book Shahdag spa treatments in advance</label>
                <label><input type="checkbox"> Verify all hotel bookings</label>
                <label><input type="checkbox"> Check car rental confirmation</label>
                <label><input type="checkbox"> Get International Driving Permit (if needed)</label>

                <h3>1 Week Before</h3>
                <label><input type="checkbox"> Download offline maps for Azerbaijan</label>
                <label><input type="checkbox"> Install Bolt taxi app</label>
                <label><input type="checkbox"> Check weather forecast</label>
                <label><input type="checkbox"> Print or save this itinerary offline</label>
                <label><input type="checkbox"> Inform bank/credit card of travel dates</label>

                <h3>Day Before Departure</h3>
                <label><input type="checkbox"> Pack layers for 8-16°C weather</label>
                <label><input type="checkbox"> Bring empty foldable bag for shopping</label>
                <label><input type="checkbox"> Charge all devices</label>
                <label><input type="checkbox"> Print flight confirmations</label>
                <label><input type="checkbox"> Cash/cards ready</label>
            </div>
        </div>

        <!-- Daily Distance Summary -->
        <div class="day-card">
            <h2 class="day-title">📍 Daily Distance Summary</h2>
            
            <table>
                <thead>
                    <tr>
                        <th>Day</th>
                        <th>Route</th>
                        <th>Distance</th>
                        <th>Driving Time</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>Day 1</td>
                        <td>Airport → Hotel</td>
                        <td>25 km</td>
                        <td>35 min</td>
                    </tr>
                    <tr>
                        <td>Day 2</td>
                        <td>Minimal local</td>
                        <td>10 km</td>
                        <td>20 min</td>
                    </tr>
                    <tr>
                        <td>Day 3</td>
                        <td>Baku ↔ Gobustan</td>
                        <td>130 km</td>
                        <td>2.5 hrs</td>
                    </tr>
                    <tr>
                        <td>Day 4</td>
                        <td>Baku → Shahdag</td>
                        <td>230 km</td>
                        <td>3.5 hrs</td>
                    </tr>
                    <tr>
                        <td>Day 5</td>
                        <td>Shahdag local + Laza</td>
                        <td>70 km</td>
                        <td>2 hrs</td>
                    </tr>
                    <tr>
                        <td>Day 6</td>
                        <td>Shahdag → Baku → Gabala</td>
                        <td>435 km</td>
                        <td>6.5 hrs</td>
                    </tr>
                    <tr>
                        <td>Day 7</td>
                        <td>Gabala local</td>
                        <td>20 km</td>
                        <td>45 min</td>
                    </tr>
                    <tr>
                        <td>Day 8</td>
                        <td>Gabala → Sheki</td>
                        <td>90 km</td>
                        <td>1.5 hrs</td>
                    </tr>
                    <tr>
                        <td>Day 9</td>
                        <td>Sheki local</td>
                        <td>25 km</td>
                        <td>45 min</td>
                    </tr>
                    <tr>
                        <td>Day 10</td>
                        <td>Sheki → Baku</td>
                        <td>300 km</td>
                        <td>5 hrs</td>
                    </tr>
                    <tr>
                        <td>Day 11</td>
                        <td>Hotel → Airport</td>
                        <td>25 km</td>
                        <td>40 min</td>
                    </tr>
                    <tr style="background: var(--primary-blue); color: white;">
                        <td colspan="2"><strong>TOTAL</strong></td>
                        <td><strong>~1,360 km</strong></td>
                        <td><strong>23+ hrs</strong></td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>

    <footer class="footer">
        <h2>🇦🇿 Enjoy Your Azerbaijan Adventure!</h2>
        <p>This itinerary balances cultural exploration, scenic beauty, shopping opportunities, and realistic November conditions.</p>
        <p>Be flexible with weather-dependent activities and embrace the off-season tranquility.</p>
        <p><strong>Safe travels!</strong></p>
        <hr style="border: 1px solid rgba(255,255,255,0.3); margin: 20px 0;">
        <p style="font-size: 0.95rem; opacity: 0.9;">Made by Essam</p>
    </footer>

    <!-- Back to Top Button -->
    <a href="#" class="back-to-top" title="Back to top">↑</a>

    <script>
        // ============================================
        // MOBILE CONTROL CENTER FUNCTIONS
        // ============================================
        
        // Toggle mobile menu
        function toggleMobileMenu() {
            const menuToggle = document.getElementById('mobileMenuToggle');
            const controlPanel = document.getElementById('mobileControlPanel');
            const overlay = document.getElementById('mobileOverlay');
            
            if (controlPanel.classList.contains('open')) {
                // Close menu
                controlPanel.classList.remove('open');
                overlay.classList.remove('active');
                menuToggle.classList.remove('active');
                menuToggle.innerHTML = '☰';
                document.body.classList.remove('mobile-menu-open');
            } else {
                // Open menu
                controlPanel.classList.add('open');
                overlay.classList.add('active');
                menuToggle.classList.add('active');
                menuToggle.innerHTML = '+';
                document.body.classList.add('mobile-menu-open');
                updateMobileLiveWidget();
            }
        }
        
        // Update mobile live widget
        function updateMobileLiveWidget() {
            const now = getAzerbaijanTime();

            // Update time and date
            const mobileTimeEl = document.getElementById('mobileLiveTime');
            const mobileDateEl = document.getElementById('mobileLiveDate');
            const mobileProgressEl = document.getElementById('mobileTripProgress');
            const mobileActivityEl = document.getElementById('mobileCurrentActivity');
            const mobileTripDaysEl = document.getElementById('mobileTripDays');

            if (mobileTimeEl) mobileTimeEl.textContent = formatTime(now);

            // Check trip status
            if (now < TRIP_CONFIG.startDate) {
                // Before trip
                const daysUntil = Math.ceil((TRIP_CONFIG.startDate - now) / (1000 * 60 * 60 * 24));
                if (mobileDateEl) mobileDateEl.textContent = `Trip starts in ${daysUntil} days`;
                if (mobileTripDaysEl) mobileTripDaysEl.textContent = `Trip starts in ${daysUntil} days`;
                if (mobileProgressEl) mobileProgressEl.style.width = '0%';
                if (mobileActivityEl) mobileActivityEl.innerHTML = '🎉 Get Ready!<br><span style="font-size: 0.85rem; opacity: 0.9;">Your Azerbaijan adventure begins soon!</span>';
            } else if (now > TRIP_CONFIG.endDate) {
                // After trip
                if (mobileDateEl) mobileDateEl.textContent = 'Trip completed!';
                if (mobileProgressEl) mobileProgressEl.style.width = '100%';
                if (mobileActivityEl) mobileActivityEl.innerHTML = '<div style="background: #E8F8F3; padding: 10px; border-radius: 8px; text-align: center;">🌟 Welcome Back!</div>';
            } else {
                // During trip
                if (mobileDateEl) mobileDateEl.textContent = `Day ${getCurrentDayNumber()} - ${formatDate(now)}`;
                
                const progress = calculateTripProgress();
                if (mobileProgressEl) mobileProgressEl.style.width = progress + '%';
                
                const { currentActivity, nextActivity } = getCurrentAndNextActivities();
                
                let activityHTML = '';
                if (currentActivity) {
                    const endTime = new Date(currentActivity.date + 'T' + currentActivity.time);
                    endTime.setMinutes(endTime.getMinutes() + currentActivity.duration);
                    activityHTML = `<div style="background: #E8F8F3; padding: 10px; border-radius: 8px;">
                        <strong>📍 Now:</strong> ${currentActivity.title}<br>
                        <small>Until ${formatTime(endTime)}</small>
                    </div>`;
                }
                if (nextActivity) {
                    const startTime = new Date(nextActivity.date + 'T' + nextActivity.time);
                    const timeUntil = startTime - now;
                    const hoursUntil = Math.floor(timeUntil / (1000 * 60 * 60));
                    const minutesUntil = Math.floor((timeUntil % (1000 * 60 * 60)) / (1000 * 60));
                    
                    let countdownText = hoursUntil > 0 ? `in ${hoursUntil}h ${minutesUntil}m` : `in ${minutesUntil} minutes`;
                    
                    activityHTML += `<div style="background: #FFF5E6; padding: 10px; border-radius: 8px; margin-top: 10px;">
                        <strong>⏭️ Next:</strong> ${nextActivity.title}<br>
                        <small>${nextActivity.time} (${countdownText})</small>
                    </div>`;
                }
                if (mobileActivityEl) mobileActivityEl.innerHTML = activityHTML || '<div style="text-align: center; color: #999;">Free time</div>';
            }
        }
        
        // Modified toggleEditMode to work with mobile
        const originalToggleEditMode = toggleEditMode;
        toggleEditMode = function() {
            originalToggleEditMode();
            
            // Update mobile save button visibility
            const mobileSaveBtn = document.getElementById('mobileSaveBtn');
            if (document.body.classList.contains('edit-mode')) {
                if (mobileSaveBtn) mobileSaveBtn.style.display = 'block';
                const editBtn = document.querySelector('.mobile-action-btn.edit');
                if (editBtn && isMobile) editBtn.innerHTML = '✓ Done';
            } else {
                if (mobileSaveBtn) mobileSaveBtn.style.display = 'none';
                const editBtn = document.querySelector('.mobile-action-btn.edit');
                if (editBtn && isMobile) editBtn.innerHTML = '✏️ Edit Mode';
            }
        };
        
        // ============================================
        // INTELLIGENT ITINERARY FEATURES
        // ============================================
        
        // Trip Configuration
        const TRIP_CONFIG = {
            startDate: new Date('2025-11-15T00:00:00'),
            endDate: new Date('2025-11-25T23:59:59'),
            timezone: 'Asia/Baku', // Azerbaijan Time (AZT)
            activities: []
        };
        
        // Initialize activities data structure from the HTML
        function initializeActivities() {
            TRIP_CONFIG.activities = [
                // Day 1
                { day: 1, date: '2025-11-15', time: '18:30', duration: 60, title: 'Arrival & Car Rental', type: 'transport' },
                { day: 1, date: '2025-11-15', time: '20:00', duration: 30, title: 'Check-in at Boutique Hotel Baku', type: 'hotel' },
                { day: 1, date: '2025-11-15', time: '20:30', duration: 90, title: 'Welcome Dinner at Firuze Restaurant', type: 'meal' },
                
                // Day 2
                { day: 2, date: '2025-11-16', time: '09:00', duration: 30, title: 'Breakfast at hotel', type: 'meal' },
                { day: 2, date: '2025-11-16', time: '09:30', duration: 30, title: 'Drive to Old City', type: 'transport' },
                { day: 2, date: '2025-11-16', time: '10:00', duration: 60, title: 'Maiden Tower Visit', type: 'attraction' },
                { day: 2, date: '2025-11-16', time: '11:15', duration: 75, title: 'Palace of Shirvanshahs', type: 'attraction' },
                { day: 2, date: '2025-11-16', time: '12:30', duration: 75, title: 'Lunch at Qaynana Restaurant', type: 'meal' },
                { day: 2, date: '2025-11-16', time: '13:45', duration: 105, title: 'Old City Shopping Reconnaissance', type: 'shopping' },
                { day: 2, date: '2025-11-16', time: '16:00', duration: 60, title: 'Highland Park for Sunset', type: 'attraction' },
                { day: 2, date: '2025-11-16', time: '18:30', duration: 90, title: 'Dinner at Art Club Restaurant', type: 'meal' },
                
                // Day 3
                { day: 3, date: '2025-11-17', time: '08:00', duration: 30, title: 'Breakfast at hotel', type: 'meal' },
                { day: 3, date: '2025-11-17', time: '08:30', duration: 75, title: 'Drive to Gobustan', type: 'transport' },
                { day: 3, date: '2025-11-17', time: '09:45', duration: 150, title: 'Gobustan National Park', type: 'attraction' },
                { day: 3, date: '2025-11-17', time: '12:45', duration: 45, title: 'Mud Volcanoes Exploration', type: 'attraction' },
                { day: 3, date: '2025-11-17', time: '14:00', duration: 60, title: 'Late Lunch', type: 'meal' },
                { day: 3, date: '2025-11-17', time: '15:00', duration: 75, title: 'Drive back to Baku', type: 'transport' },
                { day: 3, date: '2025-11-17', time: '18:30', duration: 90, title: 'Dinner at Dolma Restaurant', type: 'meal' },
                
                // Day 4
                { day: 4, date: '2025-11-18', time: '08:30', duration: 30, title: 'Breakfast at hotel', type: 'meal' },
                { day: 4, date: '2025-11-18', time: '10:00', duration: 150, title: 'Taza Bazaar Shopping Reconnaissance', type: 'shopping' },
                { day: 4, date: '2025-11-18', time: '12:30', duration: 45, title: 'Lunch at Cafe City', type: 'meal' },
                { day: 4, date: '2025-11-18', time: '13:30', duration: 210, title: 'Drive to Shahdag Mountain Resort', type: 'transport' },
                { day: 4, date: '2025-11-18', time: '17:00', duration: 45, title: 'Check-in at Pik Palace Shahdag', type: 'hotel' },
                { day: 4, date: '2025-11-18', time: '18:00', duration: 90, title: 'Dinner at hotel', type: 'meal' },
                
                // Add more days as needed...
            ];
        }
        
        // Toggle Live Widget collapse/expand
        function toggleLiveWidget() {
            const widget = document.getElementById('liveWidget');
            const toggleBtn = widget.querySelector('.live-widget-toggle');
            
            if (widget.classList.contains('collapsed')) {
                widget.classList.remove('collapsed');
                toggleBtn.innerHTML = '◀';
                localStorage.setItem('liveWidgetCollapsed', 'false');
            } else {
                widget.classList.add('collapsed');
                toggleBtn.innerHTML = '▶';
                localStorage.setItem('liveWidgetCollapsed', 'true');
            }
        }
        
        // Close Live Widget
        function closeLiveWidget() {
            document.getElementById('liveWidget').style.display = 'none';
            localStorage.setItem('liveWidgetClosed', 'true');
        }
        
        // Get Azerbaijan time
        function getAzerbaijanTime() {
            const now = new Date();
            // Azerbaijan is UTC+4
            const azerbaijanTime = new Date(now.toLocaleString("en-US", {timeZone: "Asia/Baku"}));
            return azerbaijanTime;
        }
        
        // Format time for display
        function formatTime(date) {
            return date.toLocaleTimeString('en-US', { 
                hour: '2-digit', 
                minute: '2-digit',
                hour12: false 
            });
        }
        
        // Format date for display
        function formatDate(date) {
            const options = { weekday: 'long', month: 'long', day: 'numeric' };
            return date.toLocaleDateString('en-US', options);
        }
        
        // Calculate trip progress
        function calculateTripProgress() {
            const now = getAzerbaijanTime();
            const totalDuration = TRIP_CONFIG.endDate - TRIP_CONFIG.startDate;
            const elapsed = now - TRIP_CONFIG.startDate;
            const progress = Math.max(0, Math.min(100, (elapsed / totalDuration) * 100));
            return progress;
        }
        
        // Get current day number
        function getCurrentDayNumber() {
            const now = getAzerbaijanTime();
            const daysDiff = Math.floor((now - TRIP_CONFIG.startDate) / (1000 * 60 * 60 * 24)) + 1;
            return Math.max(1, Math.min(11, daysDiff));
        }
        
        // Get current and next activities
        function getCurrentAndNextActivities() {
            const now = getAzerbaijanTime();
            const currentDateStr = now.toISOString().split('T')[0];
            const currentTime = formatTime(now);
            
            let currentActivity = null;
            let nextActivity = null;
            
            for (let i = 0; i < TRIP_CONFIG.activities.length; i++) {
                const activity = TRIP_CONFIG.activities[i];
                const activityDate = new Date(activity.date + 'T' + activity.time);
                const activityEnd = new Date(activityDate.getTime() + activity.duration * 60000);
                
                if (activity.date === currentDateStr) {
                    if (now >= activityDate && now <= activityEnd) {
                        currentActivity = activity;
                    } else if (now < activityDate && !nextActivity) {
                        nextActivity = activity;
                    }
                }
                
                // If no activity today, find the next one
                if (!nextActivity && activity.date > currentDateStr) {
                    nextActivity = activity;
                    break;
                }
            }
            
            return { currentActivity, nextActivity };
        }
        
        // Update live widget
        function updateLiveWidget() {
            const now = getAzerbaijanTime();
            const widget = document.getElementById('liveWidget');
            
            // Check if widget was manually closed
            if (localStorage.getItem('liveWidgetClosed') === 'true') {
                return;
            }
            
            // Always update time
            document.getElementById('liveTime').textContent = formatTime(now);
            
            // Check trip status
            if (now < TRIP_CONFIG.startDate) {
                // Before trip - show countdown
                const daysUntil = Math.ceil((TRIP_CONFIG.startDate - now) / (1000 * 60 * 60 * 24));
                const hoursUntil = Math.floor((TRIP_CONFIG.startDate - now) / (1000 * 60 * 60));
                
                if (daysUntil > 1) {
                    document.getElementById('liveDate').textContent = `Trip starts in ${daysUntil} days`;
                } else if (hoursUntil > 0) {
                    document.getElementById('liveDate').textContent = `Trip starts in ${hoursUntil} hours!`;
                } else {
                    document.getElementById('liveDate').textContent = 'Trip starts today!';
                }
                
                document.getElementById('currentActivityInfo').innerHTML = '<div class="next-activity"><strong>🎉 Get Ready!</strong><br>Your Azerbaijan adventure begins soon!</div>';
                document.getElementById('nextActivityInfo').innerHTML = '';
                document.getElementById('tripProgress').style.width = '0%';
                
            } else if (now > TRIP_CONFIG.endDate) {
                // After trip
                document.getElementById('liveDate').textContent = 'Trip completed!';
                document.getElementById('currentActivityInfo').innerHTML = '<div class="next-activity"><strong>🌟 Welcome Back!</strong><br>Hope you had a wonderful trip!</div>';
                document.getElementById('nextActivityInfo').innerHTML = '';
                document.getElementById('tripProgress').style.width = '100%';
                
            } else {
                // During trip
                document.getElementById('liveDate').textContent = formatDate(now) + ' - Day ' + getCurrentDayNumber();
                
                // Update progress bar
                const progress = calculateTripProgress();
                document.getElementById('tripProgress').style.width = progress + '%';
                
                // Update activities
                const { currentActivity, nextActivity } = getCurrentAndNextActivities();
                
                if (currentActivity) {
                    const endTime = new Date(currentActivity.date + 'T' + currentActivity.time);
                    endTime.setMinutes(endTime.getMinutes() + currentActivity.duration);
                    document.getElementById('currentActivityInfo').innerHTML = `
                        <div class="current-activity">
                            <strong>📍 Now:</strong> ${currentActivity.title}
                            <br><small>Until ${formatTime(endTime)}</small>
                        </div>
                    `;
                } else {
                    document.getElementById('currentActivityInfo').innerHTML = '<div class="current-activity"><strong>📍 Free Time</strong><br><small>No scheduled activity</small></div>';
                }
                
                if (nextActivity) {
                    const startTime = new Date(nextActivity.date + 'T' + nextActivity.time);
                    const timeUntil = startTime - now;
                    const hoursUntil = Math.floor(timeUntil / (1000 * 60 * 60));
                    const minutesUntil = Math.floor((timeUntil % (1000 * 60 * 60)) / (1000 * 60));
                    
                    let countdownText = '';
                    if (hoursUntil > 24) {
                        const daysUntil = Math.floor(hoursUntil / 24);
                        countdownText = `in ${daysUntil} day${daysUntil !== 1 ? 's' : ''}`;
                    } else if (hoursUntil > 0) {
                        countdownText = `in ${hoursUntil}h ${minutesUntil}m`;
                    } else if (minutesUntil > 0) {
                        countdownText = `in ${minutesUntil} minutes`;
                    } else {
                        countdownText = 'starting soon';
                    }
                    
                    document.getElementById('nextActivityInfo').innerHTML = `
                        <div class="next-activity">
                            <strong>⏭️ Next:</strong> ${nextActivity.title}
                            <br><small>${nextActivity.time} (${countdownText})</small>
                        </div>
                    `;
                } else {
                    document.getElementById('nextActivityInfo').innerHTML = '';
                }
            }
        }
        
        // Scroll to today's activities
        function scrollToToday() {
            const dayNumber = getCurrentDayNumber();
            if (dayNumber >= 1 && dayNumber <= 11) {
                const todayElement = document.getElementById('day' + dayNumber);
                if (todayElement) {
                    todayElement.scrollIntoView({ behavior: 'smooth', block: 'start' });
                    // Highlight today's card
                    document.querySelectorAll('.day-card').forEach(card => {
                        card.classList.remove('today');
                    });
                    todayElement.classList.add('today');
                }
            }
        }
        
        // Update day card statuses
        function updateDayCardStatuses() {
            const currentDay = getCurrentDayNumber();
            document.querySelectorAll('.day-card').forEach((card, index) => {
                const dayNum = index + 1;
                if (dayNum < currentDay) {
                    card.classList.add('past');
                    card.classList.remove('today');
                } else if (dayNum === currentDay) {
                    card.classList.add('today');
                    card.classList.remove('past');
                } else {
                    card.classList.remove('past', 'today');
                }
            });
        }
        
        // Smart reminders
        function checkForReminders() {
            const { nextActivity } = getCurrentAndNextActivities();
            if (!nextActivity) return;
            
            const now = getAzerbaijanTime();
            const activityTime = new Date(nextActivity.date + 'T' + nextActivity.time);
            const timeUntil = activityTime - now;
            const minutesUntil = Math.floor(timeUntil / (1000 * 60));
            
            // Check if we should show a reminder (15 minutes before)
            if (minutesUntil === 15 && !sessionStorage.getItem('reminder-' + nextActivity.title)) {
                showSmartReminder(nextActivity);
                sessionStorage.setItem('reminder-' + nextActivity.title, 'shown');
            }
        }
        
        // Show smart reminder
        function showSmartReminder(activity) {
            const reminder = document.getElementById('smartReminder');
            document.getElementById('reminderTitle').textContent = '⏰ Upcoming Activity';
            document.getElementById('reminderContent').textContent = 
                `${activity.title} starts in 15 minutes at ${activity.time}. Time to get ready!`;
            reminder.style.display = 'block';
            
            // Auto-hide after 10 seconds
            setTimeout(() => {
                reminder.style.display = 'none';
            }, 10000);
            
            // Browser notification if permitted
            if (Notification.permission === "granted") {
                new Notification("Azerbaijan Itinerary", {
                    body: `${activity.title} starts in 15 minutes!`,
                    icon: "🇦🇿"
                });
            }
        }
        
        // Dismiss reminder
        function dismissReminder() {
            document.getElementById('smartReminder').style.display = 'none';
        }
        
        // Show notification badge
        function showNotification(message) {
            const badge = document.getElementById('notificationBadge');
            badge.textContent = message;
            badge.style.display = 'block';
            setTimeout(() => {
                badge.style.display = 'none';
            }, 5000);
        }
        
        // Request notification permission
        function requestNotificationPermission() {
            if ("Notification" in window && Notification.permission === "default") {
                Notification.requestPermission().then(permission => {
                    if (permission === "granted") {
                        showNotification("✅ Notifications enabled for trip reminders!");
                    }
                });
            }
        }
        
        // Initialize intelligent features
        function initializeIntelligentFeatures() {
            initializeActivities();
            
            // Check if on mobile
            const isMobileDevice = window.innerWidth <= 480;
            
            if (isMobileDevice) {
                // Mobile: Show mobile control center
                console.log('Mobile device detected');
                
                // Hide desktop widgets
                const liveWidget = document.getElementById('liveWidget');
                if (liveWidget) liveWidget.style.display = 'none';
                
                const editControls = document.querySelector('.edit-controls');
                if (editControls) editControls.style.display = 'none';
                
                const todayBtn = document.getElementById('todayBtn');
                if (todayBtn) todayBtn.style.display = 'none';
                
                // Show mobile control center button
                const mobileCenter = document.getElementById('mobileControlCenter');
                if (mobileCenter) {
                    mobileCenter.style.display = 'block';
                    console.log('Mobile control center shown');
                }
                
                // Initial mobile update
                updateMobileLiveWidget();
            } else {
                // Desktop: Show desktop widgets
                console.log('Desktop detected');
                
                // Hide all mobile elements
                const mobileCenter = document.getElementById('mobileControlCenter');
                const mobilePanel = document.getElementById('mobileControlPanel');
                const mobileOverlay = document.getElementById('mobileOverlay');
                const mobileIndicator = document.getElementById('mobileEditIndicator');
                
                if (mobileCenter) mobileCenter.style.display = 'none';
                if (mobilePanel) mobilePanel.style.display = 'none';
                if (mobileOverlay) mobileOverlay.style.display = 'none';
                if (mobileIndicator) mobileIndicator.style.display = 'none';
                
                // ALWAYS show desktop Live Widget (unless user closed it)
                const widget = document.getElementById('liveWidget');
                if (widget) {
                    if (localStorage.getItem('liveWidgetClosed') !== 'true') {
                        widget.style.display = 'block';
                        console.log('Live widget shown on desktop');
                        
                        // Check if user previously collapsed it
                        if (localStorage.getItem('liveWidgetCollapsed') === 'true') {
                            widget.classList.add('collapsed');
                            const toggleBtn = widget.querySelector('.live-widget-toggle');
                            if (toggleBtn) toggleBtn.innerHTML = '▶';
                        }
                        
                        // Update desktop widget
                        updateLiveWidget();
                    }
                }
                
                // Show desktop edit controls
                const editControls = document.querySelector('.edit-controls');
                if (editControls) {
                    editControls.style.display = 'flex';
                    console.log('Edit controls shown on desktop');
                }
            }
            
            // Common initialization
            updateDayCardStatuses();
            
            const now = getAzerbaijanTime();
            
            // If during trip, enable extra features
            if (now >= TRIP_CONFIG.startDate && now <= TRIP_CONFIG.endDate) {
                setTimeout(scrollToToday, 1000);
                if (!isMobileDevice) {
                    const todayBtn = document.getElementById('todayBtn');
                    if (todayBtn) todayBtn.style.display = 'block';
                }
                requestNotificationPermission();
            }
            
            // Update every minute
            setInterval(() => {
                if (window.innerWidth <= 480) {
                    updateMobileLiveWidget();
                } else {
                    const widget = document.getElementById('liveWidget');
                    if (widget && widget.style.display !== 'none') {
                        updateLiveWidget();
                    }
                }
                checkForReminders();
            }, 60000);
            
            // Update time every second
            setInterval(() => {
                const now = getAzerbaijanTime();
                
                if (window.innerWidth <= 480) {
                    const mobileTimeEl = document.getElementById('mobileLiveTime');
                    if (mobileTimeEl) {
                        mobileTimeEl.textContent = formatTime(now);
                    }
                } else {
                    const liveTimeEl = document.getElementById('liveTime');
                    const widget = document.getElementById('liveWidget');
                    if (liveTimeEl && widget && widget.style.display !== 'none') {
                        liveTimeEl.textContent = formatTime(now);
                    }
                }
            }, 1000);
        }
        
        // Handle window resize to switch between mobile and desktop
        window.addEventListener('resize', function() {
            const isMobileDevice = window.innerWidth <= 480;
            const mobileCenter = document.getElementById('mobileControlCenter');
            const mobilePanel = document.getElementById('mobileControlPanel');
            const mobileOverlay = document.getElementById('mobileOverlay');
            const desktopWidget = document.getElementById('liveWidget');
            const editControls = document.querySelector('.edit-controls');
            
            if (isMobileDevice) {
                // Switch to mobile view
                if (mobileCenter) mobileCenter.style.display = 'block';
                if (desktopWidget) desktopWidget.style.display = 'none';
                if (editControls) editControls.style.display = 'none';
                updateMobileLiveWidget();
            } else {
                // Switch to desktop view - hide ALL mobile elements
                if (mobileCenter) mobileCenter.style.display = 'none';
                if (mobilePanel) {
                    mobilePanel.style.display = 'none';
                    mobilePanel.classList.remove('open');
                }
                if (mobileOverlay) {
                    mobileOverlay.style.display = 'none';
                    mobileOverlay.classList.remove('active');
                }
                
                // Show desktop elements
                if (editControls) editControls.style.display = '';
                if (localStorage.getItem('liveWidgetClosed') !== 'true') {
                    if (desktopWidget) {
                        desktopWidget.style.display = 'block';
                        updateLiveWidget();
                    }
                }
            }
        });
        
        // ============================================
        // ORIGINAL EDIT MODE AND NAVIGATION CODE
        // ============================================
        
        // Mobile detection
        const isMobile = /iPhone|iPad|iPod|Android/i.test(navigator.userAgent);
        const isIOS = /iPhone|iPad|iPod/i.test(navigator.userAgent);
        
        // Add mobile class to body for CSS targeting
        if (isMobile) {
            document.body.classList.add('mobile-device');
        }
        
        // Prevent double-tap zoom on iOS
        let lastTouchEnd = 0;
        document.addEventListener('touchend', function(event) {
            const now = (new Date()).getTime();
            if (now - lastTouchEnd <= 300) {
                event.preventDefault();
            }
            lastTouchEnd = now;
        }, false);
        
        // Edit Mode Toggle
        function toggleEditMode() {
            const body = document.body;
            const editBtn = document.querySelector('.edit-btn');
            const saveBtn = document.querySelector('.edit-btn:nth-child(3)');
            
            if (body.classList.contains('edit-mode')) {
                // Disable edit mode
                body.classList.remove('edit-mode');
                editBtn.textContent = isMobile ? '✏️ Edit' : 'Enable Editing';
                editBtn.style.background = '#0092BC';
                saveBtn.style.display = 'none';
                makeAllEditable(false);
            } else {
                // Enable edit mode
                body.classList.add('edit-mode');
                editBtn.textContent = isMobile ? '✓ Done' : 'Disable Editing';
                editBtn.style.background = '#E4002B';
                saveBtn.style.display = 'block';
                makeAllEditable(true);
                
                // Show initial tip
                if (!localStorage.getItem('editTipShown')) {
                    const message = isMobile ? 
                        'Edit Mode Enabled! \n\n✏️ Tap any text to edit\n➕ Use "Add Activity" buttons\n💾 Tap Save to download\n\nSwipe left on the navigation bar to see all days!' :
                        'Edit Mode Enabled! \n\n✏️ Click any text to edit it\n➕ Use "Add Activity" buttons to add new items\n💾 Save your changes when done\n\nTip: You can add or remove activities, change times, update restaurants, and modify any text!';
                    alert(message);
                    localStorage.setItem('editTipShown', 'true');
                }
            }
        }
        
        // Make all elements editable/non-editable
        function makeAllEditable(editable) {
            // Make all text elements in day cards editable
            const editableElements = [
                '.day-title',
                '.day-date',
                '.schedule-item h3',
                '.schedule-item h4',
                '.time-badge',
                '.restaurant-name',
                '.restaurant p',
                '.schedule-item li',
                '.info-box span',
                '.info-box p',
                '.schedule-item p',
                'td',
                '.checklist label'
            ];
            
            editableElements.forEach(selector => {
                document.querySelectorAll(selector).forEach(element => {
                    element.contentEditable = editable;
                    if (editable) {
                        element.title = isMobile ? 'Tap to edit' : 'Click to edit';
                        // Add touch-friendly padding on mobile
                        if (isMobile) {
                            element.style.minHeight = '32px';
                            element.style.padding = '8px 4px';
                        }
                    } else {
                        element.removeAttribute('title');
                        if (isMobile) {
                            element.style.minHeight = '';
                            element.style.padding = '';
                        }
                    }
                });
            });
            
            // Add "Add Activity" buttons to all day cards if not already present
            if (editable) {
                document.querySelectorAll('.day-card').forEach(card => {
                    if (!card.querySelector('.add-activity-btn')) {
                        const lastInfoBox = card.querySelector('.info-box:last-of-type') || 
                                           card.querySelector('.schedule-item:last-of-type');
                        if (lastInfoBox) {
                            const btn = document.createElement('button');
                            btn.className = 'add-activity-btn';
                            btn.textContent = '+ Add Activity';
                            btn.onclick = function() { addActivity(this); };
                            lastInfoBox.parentNode.insertBefore(btn, lastInfoBox);
                        }
                    }
                });
            }
        }
        
        // Add new activity to a day
        function addActivity(button) {
            const newActivity = document.createElement('div');
            newActivity.className = 'schedule-item';
            newActivity.innerHTML = `
                <span class="time-badge" contenteditable="true">Enter Time</span>
                <h3 contenteditable="true">New Activity</h3>
                <ul>
                    <li contenteditable="true">${isMobile ? 'Tap' : 'Click'} to add details</li>
                    <li contenteditable="true">Add another point</li>
                </ul>
                <button onclick="removeActivity(this)" style="background: #E4002B; color: white; border: none; padding: ${isMobile ? '10px 20px' : '5px 15px'}; border-radius: 5px; margin-top: 10px; cursor: pointer; ${isMobile ? 'width: 100%;' : ''}">Remove Activity</button>
            `;
            button.parentNode.insertBefore(newActivity, button);
            
            // Scroll to new activity on mobile
            if (isMobile) {
                setTimeout(() => {
                    newActivity.scrollIntoView({ behavior: 'smooth', block: 'center' });
                }, 100);
            }
        }
        
        // Remove an activity
        function removeActivity(button) {
            if (confirm('Remove this activity?')) {
                button.parentNode.remove();
            }
        }
        
        // Save the document
        function saveDocument() {
            // Clone the document
            const clone = document.documentElement.cloneNode(true);
            
            // Remove edit controls from the clone
            const editControls = clone.querySelector('.edit-controls');
            const editInstructions = clone.querySelector('.edit-instructions');
            const liveWidget = clone.querySelector('.live-widget');
            const smartReminder = clone.querySelector('.smart-reminder');
            const todayBtn = clone.querySelector('.floating-today-btn');
            const notificationBadge = clone.querySelector('.notification-badge');
            
            if (editControls) editControls.remove();
            if (editInstructions) editInstructions.remove();
            if (liveWidget) liveWidget.remove();
            if (smartReminder) smartReminder.remove();
            if (todayBtn) todayBtn.remove();
            if (notificationBadge) notificationBadge.remove();
            
            // Remove contenteditable attributes
            clone.querySelectorAll('[contenteditable]').forEach(el => {
                el.removeAttribute('contenteditable');
            });
            
            // Remove add activity buttons
            clone.querySelectorAll('.add-activity-btn').forEach(btn => btn.remove());
            
            // Remove remove buttons
            clone.querySelectorAll('button[onclick*="removeActivity"]').forEach(btn => btn.remove());
            
            // Remove edit mode class
            const body = clone.querySelector('body');
            if (body) body.classList.remove('edit-mode');
            
            // Create download
            const html = '<!DOCTYPE html>\n' + clone.outerHTML;
            const blob = new Blob([html], { type: 'text/html' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'azerbaijan-itinerary-edited.html';
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
            
            const successMessage = isMobile ? 
                '✅ Document saved!\nCheck your Downloads folder or Files app.' :
                '✅ Document saved! Check your downloads folder.';
            alert(successMessage);
        }
        
        // Auto-save to localStorage every 30 seconds when in edit mode
        setInterval(() => {
            if (document.body.classList.contains('edit-mode')) {
                const content = document.querySelector('.container').innerHTML;
                localStorage.setItem('azerbaijan-itinerary-autosave', content);
                console.log('Auto-saved at', new Date().toLocaleTimeString());
            }
        }, 30000);
        
        // Restore from autosave on page load
        window.addEventListener('load', () => {
            // Disable all contenteditable by default - only enable when Edit Mode is turned on
            document.querySelectorAll('[contenteditable="true"]').forEach(el => {
                el.setAttribute('contenteditable', 'false');
            });

            const autosaved = localStorage.getItem('azerbaijan-itinerary-autosave');
            if (autosaved && confirm('Found auto-saved changes. Would you like to restore them?')) {
                document.querySelector('.container').innerHTML = autosaved;
            }

            // Force mobile control center to be visible on mobile
            if (window.innerWidth <= 480 || /iPhone|iPad|iPod|Android/i.test(navigator.userAgent)) {
                const mobileCenter = document.getElementById('mobileControlCenter');
                if (mobileCenter) {
                    mobileCenter.style.display = 'block';
                    mobileCenter.style.visibility = 'visible';
                    mobileCenter.style.opacity = '1';
                    console.log('Mobile control center activated');
                }
                
                // Hide desktop elements
                const liveWidget = document.getElementById('liveWidget');
                if (liveWidget) liveWidget.style.display = 'none';
                
                const editControls = document.querySelector('.edit-controls');
                if (editControls) editControls.style.display = 'none';
            }
            
            // Initialize intelligent features
            initializeIntelligentFeatures();
            
            // Mobile-specific navigation hint
            if (isMobile) {
                const nav = document.querySelector('.nav');
                if (nav && !localStorage.getItem('navHintShown')) {
                    const hint = document.createElement('div');
                    hint.innerHTML = '👆 Swipe to see all days';
                    hint.style.cssText = 'position: absolute; top: 60px; left: 50%; transform: translateX(-50%); background: rgba(0,146,188,0.9); color: white; padding: 8px 15px; border-radius: 20px; font-size: 0.85rem; z-index: 1001; animation: fadeOut 3s forwards;';
                    document.body.appendChild(hint);
                    setTimeout(() => hint.remove(), 3000);
                    localStorage.setItem('navHintShown', 'true');
                }
            }
        });
        
        // Add CSS animation for mobile hint
        const style = document.createElement('style');
        style.textContent = '@keyframes fadeOut { 0% { opacity: 1; } 70% { opacity: 1; } 100% { opacity: 0; } }';
        document.head.appendChild(style);
        
        // Smooth scroll navigation with mobile optimization
        document.querySelectorAll('.nav-btn').forEach(btn => {
            btn.addEventListener('click', function(e) {
                e.preventDefault();
                const targetId = this.getAttribute('href').substring(1);
                const targetElement = document.getElementById(targetId);
                if (targetElement) {
                    // Account for sticky navigation on mobile
                    const navHeight = document.querySelector('.nav-container').offsetHeight;
                    const targetPosition = targetElement.offsetTop - navHeight - 10;
                    window.scrollTo({
                        top: targetPosition,
                        behavior: 'smooth'
                    });
                    
                    // Update active state immediately on mobile
                    if (isMobile) {
                        document.querySelectorAll('.nav-btn').forEach(b => b.classList.remove('active'));
                        this.classList.add('active');
                    }
                }
            });
        });

        // Active navigation tracking
        window.addEventListener('scroll', function() {
            const sections = document.querySelectorAll('[id]');
            const navBtns = document.querySelectorAll('.nav-btn');
            
            let currentSection = '';
            sections.forEach(section => {
                const rect = section.getBoundingClientRect();
                if (rect.top <= 150 && rect.bottom >= 150) {
                    currentSection = section.getAttribute('id');
                }
            });
            
            navBtns.forEach(btn => {
                btn.classList.remove('active');
                if (btn.getAttribute('href') === '#' + currentSection) {
                    btn.classList.add('active');
                }
            });
        });

        // Back to top button visibility
        const backToTop = document.querySelector('.back-to-top');
        window.addEventListener('scroll', function() {
            if (window.pageYOffset > 500) {
                backToTop.style.display = 'flex';
            } else {
                backToTop.style.display = 'none';
            }
        });
        
        // Smooth back to top for mobile
        backToTop.addEventListener('click', function(e) {
            e.preventDefault();
            window.scrollTo({
                top: 0,
                behavior: 'smooth'
            });
        });

        // Print-friendly version
        window.addEventListener('beforeprint', function() {
            document.querySelectorAll('.day-card').forEach(card => {
                card.style.pageBreakInside = 'avoid';
            });
        });

        // Save checklist state to localStorage
        document.querySelectorAll('.checklist input[type="checkbox"]').forEach(checkbox => {
            // Load saved state
            const id = Array.from(checkbox.parentElement.parentElement.querySelectorAll('input')).indexOf(checkbox);
            const saved = localStorage.getItem('checklist-' + id);
            if (saved === 'true') {
                checkbox.checked = true;
            }
            
            // Save state on change
            checkbox.addEventListener('change', function() {
                localStorage.setItem('checklist-' + id, this.checked);
            });
        });
        
        // Keyboard shortcut for edit mode (Ctrl+E or Cmd+E) - desktop only
        if (!isMobile) {
            document.addEventListener('keydown', function(e) {
                if ((e.ctrlKey || e.metaKey) && e.key === 'e') {
                    e.preventDefault();
                    toggleEditMode();
                }
            });
        }
        
        // Handle orientation change
        window.addEventListener('orientationchange', function() {
            setTimeout(() => {
                window.scrollTo(0, window.scrollY);
            }, 500);
        });
        
        // PWA-like installation prompt for mobile
        if (isMobile && !localStorage.getItem('installPromptShown')) {
            setTimeout(() => {
                if (confirm('💡 Tip: Add this itinerary to your home screen for easy access!\n\n' + 
                           (isIOS ? 'Tap the Share button and select "Add to Home Screen"' : 
                                   'Tap the menu button and select "Add to Home screen"'))) {
                    localStorage.setItem('installPromptShown', 'true');
                }
            }, 5000);
        }
    </script>

    <!-- Booking Info Overlay for Mobile -->
    <div class="booking-modal-overlay" id="bookingOverlay" onclick="closeBookingInfo()"></div>

    <!-- Booking Info Modal for Mobile -->
    <div class="booking-modal" id="bookingModal">
        <div class="booking-panel-header">
            <h3 id="modalTitle">Booking Details</h3>
            <button class="booking-panel-close" onclick="closeBookingInfo()">×</button>
        </div>
        <div class="booking-panel-content" id="modalContent">
            <!-- Content will be dynamically inserted -->
        </div>
    </div>

    <!-- Booking Info Side Panel for Desktop -->
    <div class="booking-side-panel" id="bookingSidePanel">
        <div class="booking-panel-header">
            <h3 id="panelTitle">Booking Details</h3>
            <button class="booking-panel-close" onclick="closeBookingInfo()">×</button>
        </div>
        <div class="booking-panel-content" id="panelContent">
            <!-- Content will be dynamically inserted -->
        </div>
    </div>

    <!-- Booking Data -->
    <script>
        const bookingData = {
            'car-rental': {
                name: 'Buta Rental Cars - Hyundai Accent',
                bookingNumber: '1086',
                pin: null,
                vehicle: 'Hyundai Accent (or similar)',
                rentalDates: '15 Nov - 25 Nov 2025 (11 days)',
                pickupLocation: 'Heydar Aliyev International Airport',
                pickupAddress: 'Baku, Azerbaijan',
                price: '450 AZN (~$265 USD)',
                deposit: '200 AZN (refundable)',
                status: 'Confirmed',
                phone: '+994-502091072',
                email: 'info@butarentalcars.az',
                website: 'www.butarentalcars.az',
                notes: '⚠️ Important:<br>• Bring valid driver\'s license and passport/ID at pickup<br>• Deposit required at start of rental<br>• Contact at least 24 hours in advance for any changes',
                mapUrl: 'https://maps.app.goo.gl/xDdeA9AVAybpNT5Y9'
            },
            'day1-hotel': {
                name: 'Boutique Hotel Baku',
                bookingNumber: '1567946832075487',
                pin: '9571',
                room: 'Economy Room (1 single bed)',
                checkIn: 'Saturday, Nov 15, 2025 at 14:00-15:00',
                checkOut: 'Sunday, Nov 16, 2025 at 11:30-12:00',
                price: 'SAR 96.19 (~$26 USD)',
                status: 'Confirmed & Prepaid',
                address: '139 Gövset Quliyev küçəsi, Baku, AZ1000, Azerbaijan',
                phone: '+994-12-4930101, +994-502518311',
                email: 'boutiquehotel.4d852pj6q@trips.booking.com',
                meals: 'No meals included',
                notes: 'Please provide all guest names at the time of booking. The name on the bank card used for payment must match the guest name.',
                mapUrl: 'https://www.google.com/maps/search/?api=1&query=Boutique+Hotel+Baku+139+Gövset+Quliyev+küçəsi+Baku+Azerbaijan'
            },
            'day3-hotel': {
                name: 'East Legend Hotel',
                bookingNumber: '1567946794629514',
                pin: '3905',
                room: 'Standard Single Room',
                checkIn: 'Sunday, Nov 16, 2025 at 14:00',
                checkOut: 'Tuesday, Nov 18, 2025 at 12:00',
                price: 'SAR 227.84 (~$61 USD)',
                status: 'Confirmed & Prepaid',
                address: '38 Khanlar St, Baku, AZ1003, Azerbaijan',
                phone: '+994-12-4911773',
                email: null,
                meals: 'Breakfast included for 1 guest per room (Nov 17, Nov 18)',
                notes: null,
                mapUrl: 'https://www.google.com/maps/search/?api=1&query=East+Legend+Hotel+38+Khanlar+St+Baku+Azerbaijan'
            },
            'day4-hotel': {
                name: 'Pik Palace, Shahdag',
                bookingNumber: '1567946794732244',
                pin: '9017',
                room: 'Deluxe King Or Two Double Bed Room',
                checkIn: 'Tuesday, Nov 18, 2025 at 15:00',
                checkOut: 'Thursday, Nov 20, 2025 at 12:00',
                price: 'SAR 570.45 (~$152 USD)',
                status: 'Confirmed & Prepaid',
                address: 'Gusar-Laza Road Km 29 Shahdag, Qusar, AZ3800, Azerbaijan',
                phone: '+994-12-3102010',
                email: 'pikpalace.4d84z2p0je@trips.trip.com',
                meals: 'Breakfast included for 1 guest per room',
                notes: '⚠️ IMPORTANT: November is off-season. Call ahead to confirm hotel operations and which facilities are available. Most activities (skiing, cable cars) will be closed.',
                mapUrl: 'https://www.google.com/maps/search/?api=1&query=Pik+Palace+Shahdag+Gusar+Azerbaijan'
            },
            'day6-hotel': {
                name: 'Gabala Karvansaray Hotel',
                bookingNumber: '5600500358',
                pin: '5706',
                room: 'Standard King Room',
                checkIn: 'Thursday, Nov 20, 2025 at 14:00',
                checkOut: 'Saturday, Nov 22, 2025 at 12:00',
                price: 'Price included in package',
                status: 'Confirmed & Prepaid',
                address: 'Karvansaray Hotel Qabala, 3600 Gabala, Azerbaijan',
                phone: '+994-50-4911881',
                email: null,
                meals: null,
                notes: null,
                mapUrl: 'https://www.google.com/maps/search/?api=1&query=Gabala+Karvansaray+Hotel+Azerbaijan'
            },
            'day8-hotel': {
                name: 'Marxal Resort & Spa',
                bookingNumber: '6174939538',
                pin: '7775',
                room: 'Standard Double Room',
                checkIn: 'Saturday, Nov 22, 2025 at 14:00',
                checkOut: 'Monday, Nov 24, 2025 at 12:00',
                price: 'Price included in package',
                status: 'Confirmed & Prepaid',
                address: 'Sheki city, AZ5500 Sheki, Azerbaijan',
                phone: '+994-12-5853585',
                email: null,
                meals: null,
                notes: null,
                mapUrl: 'https://www.google.com/maps/search/?api=1&query=Marxal+Resort+Spa+Sheki+Azerbaijan'
            }
        };

        function showBookingInfo(hotelId) {
            const hotel = bookingData[hotelId];
            if (!hotel) return;

            const content = generateBookingContent(hotel);

            // Set content for both modal and side panel
            document.getElementById('modalContent').innerHTML = content;
            document.getElementById('panelContent').innerHTML = content;
            document.getElementById('modalTitle').textContent = hotel.name;
            document.getElementById('panelTitle').textContent = hotel.name;

            // Show based on screen size
            if (window.innerWidth <= 768) {
                // Mobile: show modal
                document.getElementById('bookingOverlay').classList.add('show');
                document.getElementById('bookingModal').classList.add('show');
                document.body.style.overflow = 'hidden';
            } else {
                // Desktop: show side panel
                document.getElementById('bookingSidePanel').classList.add('open');
            }
        }

        function closeBookingInfo() {
            document.getElementById('bookingOverlay').classList.remove('show');
            document.getElementById('bookingModal').classList.remove('show');
            document.getElementById('bookingSidePanel').classList.remove('open');
            document.body.style.overflow = '';
        }

        function generateBookingContent(booking) {
            let html = '';
            const isCarRental = booking.vehicle !== undefined;

            // Status
            html += `<div class="booking-detail-row">
                <div class="booking-detail-label">📋 Status</div>
                <div class="booking-detail-value">
                    <span class="status-badge status-confirmed">✓ ${booking.status}</span>
                </div>
            </div>`;

            // Booking Number / Reservation Number
            html += `<div class="booking-detail-row">
                <div class="booking-detail-label">${isCarRental ? '🎫 Reservation Number' : '🔢 Booking Number'}</div>
                <div class="booking-detail-value">
                    <span>${booking.bookingNumber}</span>
                    <button class="copy-btn" onclick="copyToClipboard('${booking.bookingNumber}', this)">Copy</button>
                </div>
            </div>`;

            // PIN (hotels only)
            if (booking.pin) {
                html += `<div class="booking-detail-row">
                    <div class="booking-detail-label">🔑 PIN</div>
                    <div class="booking-detail-value">
                        <span>${booking.pin}</span>
                        <button class="copy-btn" onclick="copyToClipboard('${booking.pin}', this)">Copy</button>
                    </div>
                </div>`;
            }

            if (isCarRental) {
                // Car Rental specific fields
                html += `<div class="booking-detail-row">
                    <div class="booking-detail-label">🚗 Vehicle</div>
                    <div class="booking-detail-value">${booking.vehicle}</div>
                </div>`;

                html += `<div class="booking-detail-row">
                    <div class="booking-detail-label">📅 Rental Period</div>
                    <div class="booking-detail-value">${booking.rentalDates}</div>
                </div>`;

                html += `<div class="booking-detail-row">
                    <div class="booking-detail-label">📍 Pickup Location</div>
                    <div class="booking-detail-value">${booking.pickupLocation}<br><small>${booking.pickupAddress}</small></div>
                </div>`;

                html += `<div class="booking-detail-row">
                    <div class="booking-detail-label">💰 Rental Price</div>
                    <div class="booking-detail-value">${booking.price}</div>
                </div>`;

                html += `<div class="booking-detail-row">
                    <div class="booking-detail-label">💳 Deposit</div>
                    <div class="booking-detail-value">${booking.deposit}</div>
                </div>`;
            } else {
                // Hotel specific fields
                html += `<div class="booking-detail-row">
                    <div class="booking-detail-label">🛏️ Room Type</div>
                    <div class="booking-detail-value">${booking.room}</div>
                </div>`;

                html += `<div class="booking-detail-row">
                    <div class="booking-detail-label">⏰ Check-in</div>
                    <div class="booking-detail-value">${booking.checkIn}</div>
                </div>`;

                html += `<div class="booking-detail-row">
                    <div class="booking-detail-label">⏰ Check-out</div>
                    <div class="booking-detail-value">${booking.checkOut}</div>
                </div>`;

                html += `<div class="booking-detail-row">
                    <div class="booking-detail-label">💰 Price</div>
                    <div class="booking-detail-value">${booking.price}</div>
                </div>`;

                if (booking.meals) {
                    html += `<div class="booking-detail-row">
                        <div class="booking-detail-label">🍳 Meals</div>
                        <div class="booking-detail-value">${booking.meals}</div>
                    </div>`;
                }

                html += `<div class="booking-detail-row">
                    <div class="booking-detail-label">📍 Address</div>
                    <div class="booking-detail-value">${booking.address}</div>
                </div>`;
            }

            // Phone
            html += `<div class="booking-detail-row">
                <div class="booking-detail-label">📞 Phone</div>
                <div class="booking-detail-value">${booking.phone}</div>
            </div>`;

            // Email
            if (booking.email) {
                html += `<div class="booking-detail-row">
                    <div class="booking-detail-label">📧 Email</div>
                    <div class="booking-detail-value" style="word-break: break-all;">${booking.email}</div>
                </div>`;
            }

            // Website (car rental only)
            if (booking.website) {
                html += `<div class="booking-detail-row">
                    <div class="booking-detail-label">🌐 Website</div>
                    <div class="booking-detail-value"><a href="https://${booking.website}" target="_blank" style="color: var(--primary-blue);">${booking.website}</a></div>
                </div>`;
            }

            // Notes
            if (booking.notes) {
                html += `<div class="booking-note">
                    ${booking.notes}
                </div>`;
            }

            // Action Buttons
            html += `<div class="booking-actions">
                <a href="tel:${booking.phone}" class="action-btn action-btn-call">
                    📞 Call ${isCarRental ? 'Rental' : 'Hotel'}
                </a>`;

            if (booking.email) {
                html += `<a href="mailto:${booking.email}" class="action-btn action-btn-email">
                    📧 Email
                </a>`;
            }

            html += `<a href="${booking.mapUrl}" target="_blank" class="action-btn action-btn-map">
                    🗺️ View Map
                </a>
            </div>`;

            return html;
        }

        function copyToClipboard(text, button) {
            navigator.clipboard.writeText(text).then(() => {
                const originalText = button.textContent;
                button.textContent = '✓ Copied!';
                button.classList.add('copied');

                setTimeout(() => {
                    button.textContent = originalText;
                    button.classList.remove('copied');
                }, 2000);
            }).catch(err => {
                console.error('Failed to copy:', err);
                button.textContent = '✗ Failed';
                setTimeout(() => {
                    button.textContent = 'Copy';
                }, 2000);
            });
        }

        // Close on Escape key
        document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape') {
                closeBookingInfo();
            }
        });
    </script>
</body>
</html>